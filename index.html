<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>RedBack Rubbish Removal | Brisbane Southside & Logan</title>

  <meta name="description"
        content="Family-run rubbish removal in Brisbane Southside & Logan. We load it, we sweep up, and we dispose of it properly. No Mess ‚Äî No Stress." />

  <!-- Preload hero image for faster LCP -->
  <link rel="preload" as="image" href="images/family-cab.jpg" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="images/logo.png" />

  <!-- Open Graph -->
  <meta property="og:title" content="RedBack Rubbish Removal" />
  <meta property="og:description" content="No Mess ‚Äî No Stress. Rubbish removal done for you in Brisbane Southside & Logan." />
  <meta property="og:image" content="https://redbackrubbishremoval.com/images/logo.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://redbackrubbishremoval.com/" />

  <!-- LocalBusiness Schema (SEO) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"LocalBusiness",
    "name":"RedBack Rubbish Removal",
    "image":"https://redbackrubbishremoval.com/images/logo.png",
    "url":"https://redbackrubbishremoval.com/",
    "telephone":"+61459272402",
    "areaServed":["Brisbane Southside","Logan"],
    "address":{
      "@type":"PostalAddress",
      "addressRegion":"QLD",
      "addressCountry":"AU"
    }
  }
  </script>

  <link rel="stylesheet" href="CSS/styles.css" />
</head>

<body class="dark-frame">
  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-inner">
      <a href="#top" class="brand" aria-label="Go to top">
        <img src="images/logo.png" alt="RedBack Rubbish Removal logo" class="brand-logo" width="44" height="44" decoding="async">
        <div class="brand-text">
          <span class="brand-name">RedBack Rubbish Removal</span>
          <span class="brand-sub">Brisbane Southside &amp; Logan</span>
        </div>
      </a>

      <div class="header-actions">
        <div class="header-contact">
          <span class="header-label">Call us</span>
          <a href="tel:0459272402" class="header-phone">0459 272 402</a>
        </div>

        <div class="header-buttons">
          <a href="#"
             class="btn btn-ghost sms-link"
             data-body="Hi RedBack, I‚Äôd like to text photos for a quote. My suburb is: (suburb). What‚Äôs the rough load size?">
            Text photos for quote
          </a>

          <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c"
             class="btn btn-primary" target="_blank" rel="noopener">
            Book online
          </a>
        </div>
      </div>
    </div>
  </header>

  <main id="top">
    <!-- HERO -->
    <section class="hero hero-family" aria-label="Hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <span class="pill pill-light">Family-run ‚Ä¢ Fully insured ‚Ä¢ Local</span>

          <h1>Rubbish removal Brisbane Southside &amp; Logan ‚Äî fast, friendly &amp; affordable.</h1>

          <p class="hero-sub">
            We load it, we sweep up, and we dispose of it properly.<br>
            You get your space back ‚Äî <strong>No Mess ‚Äî No Stress.</strong>
          </p>

          <p class="hero-micro">
            Text <strong>1‚Äì4 photos + your suburb</strong> for a quick ballpark quote. Tip fees included.
          </p>

          <div class="hero-cta">
            <a href="tel:0459272402" class="btn btn-primary">üìû Call now</a>

            <a href="#"
               class="btn btn-outline sms-link"
               data-body="Hi RedBack, I‚Äôd like a rubbish removal quote. My suburb is: (suburb). Here are photos.">
              üì∑ Text photos for a quote
            </a>
          </div>

          <div class="hero-trust">
            <div class="stars" aria-hidden="true">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <div class="trust-copy">
              <p><strong>Trusted by Brisbane Southside &amp; Logan locals.</strong></p>
              <p class="small">On-time, uniformed &amp; respectful in your home or workplace.</p>
            </div>
          </div>
        </div>

        <!-- Desktop hero media -->
        <div class="hero-media circle-hero" aria-hidden="true">
          <div class="circle-photo-wrap">
            <img src="images/family-cab.jpg" alt="RedBack family" width="640" height="640" decoding="async" />
          </div>
          <div class="hero-badge">Real family business ‚Ä¢ Real people ‚Ä¢ Real results</div>
        </div>
      </div>
    </section>

    <!-- WHY / TRUST -->
    <section class="section section-light">
      <div class="container">
        <div class="section-header">
          <h2>Why locals choose RedBack</h2>
          <p>We treat every job like it‚Äôs our own place ‚Äî fast, tidy, and respectful.</p>
        </div>

        <div class="grid-4">
          <article class="card">
            <h3>Family-run &amp; local</h3>
            <p>You‚Äôre dealing directly with a Brisbane Southside &amp; Logan family business ‚Äî not a franchise.</p>
          </article>
          <article class="card">
            <h3>We do the heavy lifting</h3>
            <p>We load, lift, carry and sweep up so you don‚Äôt have to touch a thing.</p>
          </article>
          <article class="card">
            <h3>Clear upfront pricing</h3>
            <p>Trailer load pricing with no hidden fees. Tip fees included in your quote.</p>
          </article>
          <article class="card">
            <h3>Fully insured &amp; uniformed</h3>
            <p>Professional appearance, fully insured, and respectful on every property.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section class="section">
      <div class="container">
        <div class="section-header">
          <h2>Rubbish removal services</h2>
          <p>From single items to full cleanouts ‚Äî if it fits in our trailer, we‚Äôll handle it.</p>
        </div>

        <div class="grid-3">
          <article class="card service-card">
            <h3>Household cleanouts</h3>
            <p>Old furniture, broken appliances, general household junk and more.</p>
            <ul>
              <li>Garage &amp; shed cleanouts</li>
              <li>End-of-lease rubbish</li>
              <li>Deceased estate support</li>
            </ul>
          </article>

          <article class="card service-card">
            <h3>Yard &amp; green waste</h3>
            <p>Branches, clippings, old timber, outdoor junk and garden waste.</p>
            <ul>
              <li>Storm cleanups</li>
              <li>Overgrown yard clear-outs</li>
              <li>Outdoor furniture removal</li>
            </ul>
          </article>

          <article class="card service-card">
            <h3>Real estate &amp; rentals</h3>
            <p>Fast, reliable service for agents, landlords and body corporates.</p>
            <ul>
              <li>Pre-sale cleanups</li>
              <li>Post-tenant rubbish removal</li>
              <li>Garage &amp; storage unit clear-outs</li>
            </ul>
          </article>
        </div>

        <div class="grid-3 services-extra">
          <article class="card service-card">
            <h3>Office &amp; commercial</h3>
            <p>Old desks, shelving, shop fittings and general commercial waste.</p>
          </article>

          <article class="card service-card">
            <h3>A ‚Üí B item delivery</h3>
            <p>Need something moved from A to B? If it fits in the trailer, we can shift it.</p>
            <p class="small">Great for marketplace or bulky-item purchases.</p>
          </article>

          <article class="card service-card">
            <h3>Custom jobs</h3>
            <p>Not sure if we can take it? Just send us a photo and we‚Äôll confirm.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- PRICING -->
    <section class="section section-cream" id="pricing">
      <div class="container">
        <div class="section-header">
          <h2>Simple trailer-load pricing</h2>
          <p>Honest, upfront pricing based on how much space your rubbish takes in our trailer.</p>
        </div>

        <div class="grid-3 pricing-grid">
          <article class="card card-pricing">
            <div class="pill pill-soft">Light loads</div>
            <h3>Quarter load</h3>
            <p class="price">From $130</p>
            <p>Perfect for a few bulky items or a small cleanout.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Ideal for single rooms or light jobs</li>
            </ul>
          </article>

          <article class="card card-pricing card-pricing-featured">
            <div class="pill pill-strong">Most popular</div>
            <h3>Half load</h3>
            <p class="price">From $320</p>
            <p>Great for garage, shed or mixed household rubbish.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Best value for typical jobs</li>
            </ul>
          </article>

          <article class="card card-pricing">
            <div class="pill pill-soft">Big cleanouts</div>
            <h3>Full load</h3>
            <p class="price">From $550</p>
            <p>For full property cleanouts and major declutters.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Multiple loads available</li>
            </ul>
          </article>
        </div>

        <p class="small align-center">
          Final price depends on access, type of material and total volume.
          Text us photos for a fast, no-obligation quote.
        </p>
      </div>
    </section>

    <!-- HOW IT WORKS -->
    <section class="section">
      <div class="container">
        <div class="section-header">
          <h2>How it works</h2>
          <p>We keep it simple so you can get on with your day.</p>
        </div>

        <div class="grid-3 steps-grid">
          <article class="card step-card">
            <div class="step-number">1</div>
            <h3>Send photos + suburb</h3>
            <p>Text photos of what you want gone plus your suburb ‚Äî fastest way to quote.</p>
          </article>

          <article class="card step-card">
            <div class="step-number">2</div>
            <h3>Get a clear quote</h3>
            <p>We confirm your price upfront. No hidden fees or surprise add-ons.</p>
          </article>

          <article class="card step-card">
            <div class="step-number">3</div>
            <h3>We load &amp; sweep up</h3>
            <p>On the day, we arrive on time, load everything and leave it tidy.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- WHAT WE CAN‚ÄôT TAKE (Trust + reduces time-wasters) -->
    <section class="section section-light" id="restrictions">
      <div class="container">
        <div class="section-header">
          <h2>What we usually can‚Äôt take</h2>
          <p>If you‚Äôre unsure, text a photo ‚Äî we‚Äôll confirm fast.</p>
        </div>

        <div class="grid-3">
          <article class="card">
            <h3>Hazardous materials</h3>
            <p>Paint, chemicals, fuel, gas bottles, oils, solvents.</p>
          </article>
          <article class="card">
            <h3>Asbestos / biohazard</h3>
            <p>Asbestos, medical waste, sharps, contaminated materials.</p>
          </article>
          <article class="card">
            <h3>Anything restricted by tip rules</h3>
            <p>Some items may require special disposal ‚Äî we‚Äôll advise the best option.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section class="section section-light" id="gallery">
      <div class="container">
        <div class="section-header">
          <h2>Recent jobs we‚Äôve completed</h2>
          <p>Real jobs from Brisbane Southside &amp; Logan clients.</p>
        </div>

        <div class="gallery-grid">
          <figure class="gallery-item">
            <img src="images/green-waste.jpg" alt="Green waste cleanup after storm"
                 loading="lazy" decoding="async" width="640" height="480" />
            <figcaption>Green waste cleared and taken away.</figcaption>
          </figure>

          <figure class="gallery-item">
            <img src="images/storage-unit.jpg" alt="Storage unit rubbish removal job"
                 loading="lazy" decoding="async" width="640" height="480" />
            <figcaption>Storage unit completely emptied and swept.</figcaption>
          </figure>

          <figure class="gallery-item">
            <img src="images/gym-equipment.jpg" alt="Old gym equipment removal job"
                 loading="lazy" decoding="async" width="640" height="480" />
            <figcaption>Heavy gym equipment safely removed.</figcaption>
          </figure>

          <figure class="gallery-item">
            <img src="images/boxes-delivery.jpg" alt="Boxes and furniture loaded for delivery"
                 loading="lazy" decoding="async" width="640" height="480" />
            <figcaption>Boxes &amp; furniture picked up and delivered.</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- AREAS WE COVER -->
    <section class="section section-dark" id="areas">
      <div class="container">
        <div class="section-header">
          <h2>Areas we cover</h2>
          <p>Based on Brisbane Southside &amp; Logan, with flexible coverage nearby.</p>
        </div>

        <div class="areas-grid">
          <ul class="areas-list">
            <li>Rochedale South</li><li>Rochedale</li><li>Underwood</li><li>Springwood</li>
            <li>Slacks Creek</li><li>Daisy Hill</li><li>Logan Central</li><li>Woodridge</li>
            <li>Kingston</li><li>Loganlea</li><li>Marsden</li><li>Crestmead</li>
            <li>Meadowbrook</li><li>Heritage Park</li><li>Hillcrest</li><li>Regents Park</li>
            <li>Browns Plains</li><li>Berrinba</li><li>Shailer Park</li><li>Tanah Merah</li>
            <li>Eight Mile Plains</li><li>Kuraby</li><li>Runcorn</li><li>Sunnybank Hills</li>
            <li>Upper Mount Gravatt</li><li>Wishart</li><li>Carindale</li><li>Carina Heights</li>
            <li>Holland Park</li><li>Holland Park West</li><li>Calamvale</li><li>Parkinson</li>
            <li>Drewvale</li><li>Algester</li><li>Priestdale</li><li>Burbank</li>
            <li>Capalaba</li><li>Chandler</li><li>And surrounding suburbs within ~20 km of Rochedale South</li>
          </ul>

          <div class="areas-card card">
            <h3>Not sure if you‚Äôre in range?</h3>
            <p>Send us your address and a quick photo of what needs to go. We‚Äôll confirm if we can help and what it will cost.</p>

            <a href="#"
               class="btn btn-outline sms-link"
               data-body="Hi RedBack, can you confirm if you service my suburb? My suburb is: (suburb).">
              Text us your suburb
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- REVIEWS -->
    <section class="section section-cream" id="reviews">
      <div class="container">
        <div class="section-header">
          <h2>What our customers say</h2>
          <p>Real feedback from people we‚Äôve helped.</p>
        </div>

        <div class="grid-3 reviews-grid">
          <article class="card review-card">
            <div class="stars" aria-hidden="true">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúTurned up on time, cleared everything quickly and left the area spotless. Super friendly husband and wife and easy to deal with.‚Äù</p>
            <p class="review-name">‚Äî Mark W. ¬∑ Waterford</p>
          </article>

          <article class="card review-card">
            <div class="stars" aria-hidden="true">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúUsed TJ for a rental cleanout. Great communication, fair price and the place looked 100x better afterwards.‚Äù</p>
            <p class="review-name">‚Äî Karen A. ¬∑ Forest Lake</p>
          </article>

          <article class="card review-card">
            <div class="stars" aria-hidden="true">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúMade a big job feel easy. They loaded everything and swept up ‚Äî worth every dollar.‚Äù</p>
            <p class="review-name">‚Äî Andy S. ¬∑ Kingston</p>
          </article>
        </div>
      </div>
    </section>

    <!-- CONTACT / FINAL CTA -->
    <section class="section section-dark" id="contact">
      <div class="container contact-grid">
        <div>
          <h2>Ready to clear the clutter?</h2>
          <p>Send photos of your rubbish or give us a quick call. We‚Äôll come back with a clear, upfront quote.</p>

          <div class="contact-cta">
            <a href="tel:0459272402" class="btn btn-primary">üìû Call 0459 272 402</a>
            <a href="#"
               class="btn btn-ghost-light sms-link"
               data-body="Hi RedBack, I‚Äôd like a rubbish removal quote. My suburb is: (suburb). Here are photos.">
              üì∑ Text photos for a quote
            </a>
          </div>

          <p class="small contact-note">
            Prefer to book online?
            <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c" target="_blank" rel="noopener">
              Click here to use our online booking form.
            </a>
          </p>
        </div>

        <div class="contact-details card">
          <h3>Business details</h3>
          <ul class="contact-list">
            <li><strong>Service area:</strong> Brisbane Southside &amp; Logan</li>
            <li><strong>Hours:</strong> Monday‚ÄìSaturday (flexible by appointment)</li>
            <li><strong>ABN:</strong> 54 532 714 102</li>
            <li><strong>Email:</strong> <a href="mailto:info@redbackrubbishremoval.com">info@redbackrubbishremoval.com</a></li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-inner">
      <img src="images/logo.png" alt="RedBack Rubbish Removal logo" class="footer-logo" width="95" height="95" loading="lazy" decoding="async" />
      <p class="footer-tagline">No Mess ‚Äî No Stress.</p>

      <div class="footer-info">
        <p>Family-run rubbish removal servicing Brisbane Southside &amp; Logan.</p>
        <p>ABN: 54 532 714 102</p>

        <div class="footer-cultural">
          <span>Proudly Indigenous-owned &amp; family-operated.</span>

          <span class="flag-icons" aria-label="Aboriginal and Torres Strait Islander flags">
            <!-- Aboriginal Flag -->
            <svg width="20" height="14" viewBox="0 0 20 14" role="img" aria-label="Aboriginal flag">
              <rect width="20" height="14" fill="#000"/>
              <rect y="7" width="20" height="7" fill="#E30613"/>
              <circle cx="10" cy="7" r="4" fill="#FFD600"/>
            </svg>

            <!-- Torres Strait Islander Flag -->
            <img src="images/ts-flag.jpg" alt="Torres Strait Islander flag" class="flag-img" width="20" height="14" loading="lazy" decoding="async">
          </span>
        </div>
      </div>

      <div class="footer-copy">
        ¬© <span id="year"></span> RedBack Rubbish Removal. All rights reserved.
      </div>
    </div>
  </footer>

  <!-- MOBILE STICKY BAR -->
  <div class="mobile-bar" role="navigation" aria-label="Quick actions">
    <a href="tel:0459272402">Call</a>
    <a href="#" class="sms-link" data-body="Hi RedBack, I‚Äôd like a rubbish removal quote. My suburb is: (suburb). Here are photos.">Text photos</a>
    <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c" target="_blank" rel="noopener">Book online</a>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Year fill
      var y = new Date().getFullYear();
      var el = document.getElementById('year');
      if (el) el.textContent = y;

      // Cross-device SMS body handling
      var phone = "0459272402";
      var isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
      document.querySelectorAll('.sms-link').forEach(function(a){
        var body = a.getAttribute('data-body') || '';
        var encoded = encodeURIComponent(body);
        // iOS commonly wants &body= when number is present
        var joiner = isIOS ? '&body=' : '?body=';
        a.setAttribute('href', 'sms:' + phone + joiner + encoded);
      });
    });
  </script>

 <!-- ================= REDBACK CHAT WIDGET v4.4 (FIXED) ================= -->

<style>
  :root { --rbx-mobilebar-h: 56px; } /* adjust if your mobile bar is taller */

  .rbx-chat-launcher{
    position:fixed; right:20px; bottom:20px; z-index:9999;
    background:#d7262d; color:#fff; border:none;
    padding:12px 18px; border-radius:999px;
    font-size:15px; cursor:pointer;
    box-shadow:0 10px 28px rgba(0,0,0,0.35);
    display:inline-flex; align-items:center; gap:8px;
    font-weight:600;
    transition:transform .25s ease-out, box-shadow .25s ease-out;
  }
  .rbx-chat-launcher span{ font-size:13px; opacity:.9; }

  .rbx-chat-launcher.rbx-enter{ animation: rbxEntrance .7s ease-out 1, rbxIdleGlow 4.5s ease-in-out infinite; }
  .rbx-chat-launcher.rbx-wiggle{ animation: rbxWiggle .8s ease-out 1, rbxIdleGlow 4.5s ease-in-out infinite; }

  @media (hover:hover) and (pointer:fine){
    .rbx-chat-launcher:hover{ transform:translateY(-2px); box-shadow:0 14px 34px rgba(0,0,0,0.5); }
  }

  @keyframes rbxIdleGlow{
    0%,100%{ box-shadow:0 10px 28px rgba(0,0,0,0.35); }
    50%{ box-shadow:0 14px 40px rgba(215,38,45,0.55); }
  }
  @keyframes rbxEntrance{
    0%{ transform:translateY(20px); opacity:0; }
    60%{ transform:translateY(-3px); opacity:1; }
    100%{ transform:translateY(0); }
  }
  @keyframes rbxWiggle{
    0%{ transform:translateX(0); }
    20%{ transform:translateX(-3px); }
    40%{ transform:translateX(3px); }
    60%{ transform:translateX(-2px); }
    80%{ transform:translateX(2px); }
    100%{ transform:translateX(0); }
  }

  .rbx-chat-panel{
    position:fixed; right:20px; bottom:80px;
    width:320px; max-width:calc(100% - 32px);
    background:#111; color:#fff; border-radius:20px;
    display:none; flex-direction:column; overflow:hidden;
    z-index:9999;
    box-shadow:0 20px 45px rgba(0,0,0,0.55);
    border:1px solid rgba(255,255,255,0.1);
    transition:width .22s ease-out;
  }
  .rbx-chat-panel.rbx-wide{ width:420px; max-width:calc(100% - 32px); }

  @media (max-width:720px){
    .rbx-chat-launcher{
      right:14px;
      bottom: calc(var(--rbx-mobilebar-h) + 14px);
    }
    .rbx-chat-panel,
    .rbx-chat-panel.rbx-wide{
      left:10px; right:10px; width:auto;
      bottom: calc(var(--rbx-mobilebar-h) + 72px);
    }
  }

  .rbx-chat-header{
    padding:10px 14px;
    background:linear-gradient(135deg,#d7262d,#8e171b);
    display:flex; align-items:center; justify-content:space-between;
    font-size:13px; gap:8px;
  }
  .rbx-chat-header-left{ display:flex; align-items:center; gap:8px; }
  .rbx-chat-avatar{
    width:26px; height:26px; border-radius:50%;
    background:#111; border:2px solid #f5eee4;
    display:flex; align-items:center; justify-content:center;
    font-size:16px;
  }
  .rbx-chat-header-actions{ display:flex; align-items:center; gap:6px; }
  .rbx-chat-resize{
    background:rgba(0,0,0,0.18);
    border-radius:999px; border:none; color:#fff;
    width:22px; height:22px; font-size:13px; cursor:pointer;
    display:flex; align-items:center; justify-content:center;
  }
  .rbx-chat-close{
    background:rgba(0,0,0,0.2); border:none; color:#fff;
    width:24px; height:24px; border-radius:999px;
    font-size:18px; cursor:pointer; line-height:1;
  }

  .rbx-chat-messages{
    padding:12px; max-height:320px; overflow-y:auto;
    background:radial-gradient(circle at top left,#262626 0,#181818 48%,#141414 100%);
  }
  .rbx-msg{ margin-bottom:12px; display:flex; }
  .rbx-msg.user{ justify-content:flex-end; }
  .rbx-msg.ai{ justify-content:flex-start; }

  .rbx-bubble{
    padding:10px 12px; border-radius:14px;
    font-size:13px; max-width:80%;
    line-height:1.35; white-space:pre-wrap; word-wrap:break-word;
  }
  .rbx-msg.user .rbx-bubble{ background:#0283FF; color:#fff; border-bottom-right-radius:4px; }
  .rbx-msg.ai .rbx-bubble{ background:#1f1f1f; color:#fff; border-bottom-left-radius:4px; }

  .rbx-quick-wrapper{
    padding:8px 10px 10px;
    background:#101010;
    border-top:1px solid rgba(255,255,255,0.06);
    display:flex; flex-direction:column; gap:8px;
  }
  .rbx-photo-btn{
    border:none; cursor:pointer; border-radius:14px;
    padding:10px 12px; width:100%;
    background:radial-gradient(circle at top left,#ff5a5f 0,#d7262d 40%,#8e171b 100%);
    color:#fff; display:flex; align-items:center; justify-content:space-between; gap:10px;
    box-shadow:0 10px 26px rgba(0,0,0,0.45);
  }
  .rbx-photo-main{ display:flex; align-items:center; gap:10px; }
  .rbx-photo-icon{
    width:30px; height:30px; border-radius:999px;
    background:rgba(0,0,0,0.25);
    display:flex; align-items:center; justify-content:center; font-size:17px;
  }
  .rbx-photo-text{ display:flex; flex-direction:column; text-align:left; }
  .rbx-photo-text strong{ font-size:12px; letter-spacing:.03em; }
  .rbx-photo-text span{ font-size:11px; opacity:.9; }
  .rbx-photo-tag{
    font-size:11px; padding:4px 8px; border-radius:999px;
    background:rgba(0,0,0,0.25);
    border:1px solid rgba(255,255,255,0.28);
    white-space:nowrap;
  }

  .rbx-quick-label{
    font-size:11px; text-transform:uppercase; letter-spacing:.12em;
    opacity:.55; padding:0 2px;
  }
  .rbx-quick-replies{
    display:flex; gap:6px; overflow-x:auto; padding-bottom:4px;
    scrollbar-width:none;
  }
  .rbx-quick-replies::-webkit-scrollbar{ display:none; }
  .rbx-quick-replies button{
    border:none; border-radius:999px; padding:5px 11px;
    font-size:11px; background:rgba(255,255,255,0.04);
    color:#f5eee4; cursor:pointer; white-space:nowrap;
    border:1px solid rgba(255,255,255,0.08);
    backdrop-filter:blur(6px);
  }
  .rbx-quick-replies button:hover{ background:rgba(255,255,255,0.08); }

  .rbx-chat-form{
    padding:8px 10px 10px;
    background:#101010;
    border-top:1px solid rgba(255,255,255,0.08);
    display:flex; gap:6px;
  }
  .rbx-input{
    flex:1; padding:8px 12px; border-radius:999px;
    background:#181818; border:1px solid #333; color:#fff;
    font-size:13px; outline:none;
  }
  .rbx-send{
    background:#d7262d; border:none; color:#fff;
    padding:8px 16px; border-radius:8px;
    cursor:pointer; font-size:13px; font-weight:600;
  }

  .typing{ opacity:.7; font-size:12px; }

  .rbx-link-btn{
    display:inline-flex; align-items:center; justify-content:center;
    padding:6px 12px; margin-top:8px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,0.16);
    background:#d7262d; color:#fff;
    font-size:12px; font-weight:600;
    cursor:pointer; text-decoration:none; white-space:nowrap;
  }
  .rbx-link-btn.secondary{ background:#1f1f1f; border-color:rgba(255,255,255,0.22); }
  .rbx-link-btn:hover{ filter:brightness(1.05); }

  .rbx-dot{
    display:inline-block; width:4px; height:4px; margin-left:2px;
    border-radius:50%; background:#fff; opacity:.4;
    animation: rbxDots 1.2s infinite;
  }
  .rbx-dot:nth-child(2){ animation-delay:.2s; }
  .rbx-dot:nth-child(3){ animation-delay:.4s; }

  @keyframes rbxDots{
    0%,100%{ transform:translateY(0); opacity:.3; }
    50%{ transform:translateY(-2px); opacity:1; }
  }

  .rbx-upload-thumb{
    max-width:60px; max-height:60px;
    border-radius:8px; margin:2px; object-fit:cover;
    display:inline-block;
  }
</style>

<button id="rbx-launcher" class="rbx-chat-launcher rbx-enter" type="button">
  üï∑Ô∏è <span>Chat with Tai</span>
</button>

<div id="rbx-panel" class="rbx-chat-panel" aria-live="polite">
  <div class="rbx-chat-header">
    <div class="rbx-chat-header-left">
      <div class="rbx-chat-avatar">üï∑Ô∏è</div>
      <span>Chat with Tai ¬∑ TJ &amp; Marika‚Äôs team</span>
    </div>
    <div class="rbx-chat-header-actions">
      <button id="rbx-resize" class="rbx-chat-resize" title="Expand chat" type="button">‚§¢</button>
      <button id="rbx-close" class="rbx-chat-close" type="button">&times;</button>
    </div>
  </div>

  <div id="rbx-messages" class="rbx-chat-messages"></div>

  <div class="rbx-quick-wrapper">
    <button id="rbx-photo-btn" class="rbx-photo-btn" type="button">
      <div class="rbx-photo-main">
        <div class="rbx-photo-icon">üì∏</div>
        <div class="rbx-photo-text">
          <strong>Upload photos for a quote</strong>
          <span>Fastest way to get a rough price</span>
        </div>
      </div>
      <div class="rbx-photo-tag">~1‚Äì4 pics ‚Ä¢ 30 sec</div>
    </button>

    <div class="rbx-quick-label">Quick questions</div>
    <div id="rbx-quick" class="rbx-quick-replies">
      <button type="button" data-text="Can I get your price list and how your load sizes work?">Price &amp; load sizes</button>
      <button type="button" data-text="Which suburbs do you service?">Service areas</button>
      <button type="button" data-text="Can you give me a list of what you can take and what you can‚Äôt take?">What can you take?</button>
      <button type="button" data-text="How soon could you come out to help me?">Earliest availability</button>
      <button type="button" data-text="What do you need from me to give a proper quote?">What do you need?</button>
      <button type="button" data-text="I‚Äôm ready to book a pickup. What do you need to know?">I‚Äôm ready to book</button>
    </div>
  </div>

  <form id="rbx-form" class="rbx-chat-form">
    <input id="rbx-input" class="rbx-input" type="text"
           placeholder="Ask about rubbish, prices, suburbs..."
           autocomplete="off" />
    <button id="rbx-send" class="rbx-send" type="submit">Send</button>
  </form>
</div>

<script>
  (function(){
    const API_URL = "https://tai-os.crimson-meadow-d5c5.workers.dev"; // update if needed
    const phone = "0459272402";
    const jobberHref = "https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c";

    const STORAGE_KEY_HISTORY = "rbx_tai_history_v2";
    const STORAGE_KEY_MESSAGES = "rbx_tai_messages_v2";
    const STORAGE_KEY_WIDE = "rbx_tai_panel_wide";
    const STORAGE_KEY_LEAD = "rbx_tai_lead_v1";
    const STORAGE_KEY_CONVO = "rbx_tai_conversation_v6";

    const launcher = document.getElementById("rbx-launcher");
    const panel = document.getElementById("rbx-panel");
    const closeBtn = document.getElementById("rbx-close");
    const resizeBtn = document.getElementById("rbx-resize");
    const messages = document.getElementById("rbx-messages");
    const input = document.getElementById("rbx-input");
    const form = document.getElementById("rbx-form");
    const photoBtn = document.getElementById("rbx-photo-btn");
    const quick = document.getElementById("rbx-quick");

    if (!launcher || !panel || !messages || !input || !form) {
      console.error("[RBX] Widget mount failed: missing DOM nodes");
      return;
    }

    // hidden file input
    const fileInput = document.createElement("input");
    fileInput.type = "file";
    fileInput.accept = "image/*";
    fileInput.multiple = true;
    fileInput.style.display = "none";
    document.body.appendChild(fileInput);

    let history = [];
    let conversationId = null;

    // ---------- Helpers ----------
    function isIOS(){
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    function buildSmsHref(body){
      const encoded = encodeURIComponent(body || "");
      const joiner = isIOS() ? "&body=" : "?body=";
      return `sms:${phone}${joiner}${encoded}`;
    }

    function loadLead(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY_LEAD);
        return raw ? JSON.parse(raw) : {};
      }catch(e){ return {}; }
    }
    function saveLead(partial){
      try{
        const current = loadLead();
        const next = Object.assign({}, current, partial);
        localStorage.setItem(STORAGE_KEY_LEAD, JSON.stringify(next));
        return next;
      }catch(e){ return partial; }
    }

    function loadConversationId(){
      try{ return localStorage.getItem(STORAGE_KEY_CONVO) || null; }
      catch(e){ return null; }
    }
    function saveConversationId(id){
      conversationId = id;
      try{ localStorage.setItem(STORAGE_KEY_CONVO, id); }catch(e){}
    }
    conversationId = loadConversationId();

    // ---------- Audio ----------
    let audioCtx = null;
    function ensureAudio(){
      if (!audioCtx){
        const AC = window.AudioContext || window.webkitAudioContext;
        if (AC) audioCtx = new AC();
      }
    }
    function playSound(type){
      ensureAudio();
      if (!audioCtx) return;
      const now = audioCtx.currentTime;

      function tone(freq, start, duration, vol){
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.frequency.setValueAtTime(freq, now + start);
        gain.gain.setValueAtTime(0.001, now + start);
        gain.gain.exponentialRampToValueAtTime(vol, now + start + 0.01);
        gain.gain.exponentialRampToValueAtTime(0.001, now + start + duration);
        osc.type = "sine";
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(now + start);
        osc.stop(now + start + duration + 0.02);
      }

      if (type === "tap")  tone(260, 0, 0.08, 0.12);
      if (type === "send"){ tone(360, 0, 0.09, 0.15); tone(520, 0.05, 0.09, 0.12); }
      if (type === "open"){ tone(180, 0, 0.12, 0.13); tone(260, 0.04, 0.12, 0.11); }
    }

    // ---------- Restore ----------
    try{
      const savedH = localStorage.getItem(STORAGE_KEY_HISTORY);
      const savedM = localStorage.getItem(STORAGE_KEY_MESSAGES);
      const wide = localStorage.getItem(STORAGE_KEY_WIDE);

      if (wide === "1") panel.classList.add("rbx-wide");

      if (savedH) {
        const parsed = JSON.parse(savedH);
        if (Array.isArray(parsed)) history = parsed;
      }
      if (savedM) {
        messages.innerHTML = savedM;
        if (messages.innerHTML.trim()) messages.dataset.loaded = "1";
      }
    }catch(e){
      history = [];
    }

    function saveChat(){
      try{
        localStorage.setItem(STORAGE_KEY_HISTORY, JSON.stringify(history));
        localStorage.setItem(STORAGE_KEY_MESSAGES, messages.innerHTML);
      }catch(e){}
    }

    // ---------- UI ----------
    function showPanel(){
      panel.style.display = "flex";
      if (!messages.dataset.loaded) {
        const intro =
          "Hey, I‚Äôm Tai üëã\n" +
          "Ask me about quotes ‚Äî I‚Äôll get you sorted quicker than it takes TJ to load the trailer üòÇ\n" +
          "Tell me what you‚Äôre getting rid of + your suburb. You can send photos too.";
        addAI(intro);
        history.push({ role:"assistant", content:intro });
        messages.dataset.loaded = "1";
        saveChat();
      }
    }
    function hidePanel(){ panel.style.display = "none"; }

    launcher.addEventListener("click", () => {
      playSound("open");
      if (panel.style.display === "flex") hidePanel();
      else showPanel();
    });

    if (closeBtn) closeBtn.addEventListener("click", hidePanel);

    if (resizeBtn){
      resizeBtn.addEventListener("click", () => {
        panel.classList.toggle("rbx-wide");
        try{
          localStorage.setItem(STORAGE_KEY_WIDE, panel.classList.contains("rbx-wide") ? "1" : "0");
        }catch(e){}
      });
    }

    function escapeHtml(s){
      return (s || "").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
    }

    function formatAiText(text){
      let safe = escapeHtml(text);
      safe = safe.replace(/\n/g, "<br>");
      // Turn sms: and Jobber links into buttons if Tai returns them
      safe = safe.replace(/(sms:[^\s<]+)/g, (_, href) =>
        `<button class="rbx-link-btn" data-href="${href}">üì≤ Text details to TJ &amp; Marika</button>`
      );
      safe = safe.replace(/(https:\/\/clienthub\.getjobber\.com[^\s<]+)/g, (_, href) =>
        `<button class="rbx-link-btn secondary" data-href="${href}">üìù Book online</button>`
      );
      return safe;
    }

    function buildSmsBodyFromLead(lead){
      if (!lead || typeof lead !== "object") return "";
      const f = lead.fields || {};
      const bits = [];
      if (f.serviceType || f.notes) bits.push(`Getting rid of: ${String(f.serviceType || f.notes).trim()}`);
      if (f.suburb) bits.push(`Suburb: ${f.suburb}`);
      if (f.timing) bits.push(`Timing: ${f.timing}`);
      if (f.phone) bits.push(`Phone: ${f.phone}`);
      if (!bits.length) return "";
      return `Hey TJ & Marika, here are my details:\n- ${bits.join("\n- ")}\n\nSend me a quote when you can üòä`;
    }

    function addAI(text, meta){
      const wrap = document.createElement("div");
      wrap.className = "rbx-msg ai";
      let bubbleHtml = formatAiText(text);
      const extraBtns = [];

      // Lead-based CTA
      let leadStatus = null;
      let smsBody = "";
      if (meta && meta.lead){
        leadStatus = meta.lead.status || null;
        smsBody = buildSmsBodyFromLead(meta.lead);
      }

      // Prefer worker actions if present
      if (meta && meta.actions){
        if (meta.actions.suggest_sms && meta.sms_body && !String(text).includes("sms:")){
          extraBtns.push(`<button class="rbx-link-btn" data-href="${buildSmsHref(meta.sms_body)}">üì≤ Text details to TJ &amp; Marika</button>`);
        }
        if (meta.actions.suggest_booking_link && !String(text).includes("clienthub.getjobber.com")){
          extraBtns.push(`<button class="rbx-link-btn secondary" data-href="${jobberHref}">üìù Book online</button>`);
        }
      } else {
        // heuristic
        if ((leadStatus === "readyToBook" || leadStatus === "lockedIn") && smsBody && !String(text).includes("sms:")){
          extraBtns.push(`<button class="rbx-link-btn" data-href="${buildSmsHref(smsBody)}">üì≤ Text details to TJ &amp; Marika</button>`);
        }
        if (leadStatus === "readyToBook" || leadStatus === "lockedIn"){
          if (!String(text).includes("clienthub.getjobber.com")){
            extraBtns.push(`<button class="rbx-link-btn secondary" data-href="${jobberHref}">üìù Book online</button>`);
          }
        }
      }

      if (extraBtns.length) bubbleHtml = `${bubbleHtml}<br>${extraBtns.join(" ")}`;

      wrap.innerHTML = `<div class="rbx-bubble">${bubbleHtml}</div>`;
      messages.appendChild(wrap);
      messages.scrollTop = messages.scrollHeight;
      saveChat();
    }

    function addUser(text){
      const wrap = document.createElement("div");
      wrap.className = "rbx-msg user";
      wrap.innerHTML = `<div class="rbx-bubble">${escapeHtml(text)}</div>`;
      messages.appendChild(wrap);
      messages.scrollTop = messages.scrollHeight;
      saveChat();
    }

    function addUserImages(imageDataUrls){
      if (!imageDataUrls || !imageDataUrls.length) return;
      const wrap = document.createElement("div");
      wrap.className = "rbx-msg user";
      const imgsHtml = imageDataUrls.map(src =>
        `<img src="${src}" alt="Uploaded photo" class="rbx-upload-thumb">`
      ).join("");
      wrap.innerHTML = `<div class="rbx-bubble">${imgsHtml}</div>`;
      messages.appendChild(wrap);
      messages.scrollTop = messages.scrollHeight;
      saveChat();
    }

    function typing(){
      const el = document.createElement("div");
      el.className = "rbx-msg ai typing";
      el.innerHTML = `<div class="rbx-bubble">Tai is typing<span class="rbx-dot"></span><span class="rbx-dot"></span><span class="rbx-dot"></span></div>`;
      messages.appendChild(el);
      messages.scrollTop = messages.scrollHeight;
      return el;
    }

    // ---------- Photos ----------
    if (photoBtn){
      photoBtn.addEventListener("click", () => { playSound("tap"); fileInput.click(); });
    }

    fileInput.addEventListener("change", async () => {
      const files = Array.from(fileInput.files || []);
      if (!files.length) return;

      try{
        const selected = files.slice(0,4);
        const dataUrls = await Promise.all(selected.map(file => new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        })));

        addUser("I've uploaded some photos for a rubbish removal quote.");
        addUserImages(dataUrls);

        playSound("send");
        await sendMessage(
          "These are photos of the rubbish I want a quote for. Please help with load size, rough ballpark, and any questions you need to ask.",
          dataUrls
        );
      }catch(err){
        console.error(err);
        addAI("Something went wrong uploading those pics üòÖ Try again, or text photos + your suburb to 0459 272 402 and TJ or Marika will sort a quote.");
      }finally{
        fileInput.value = "";
      }
    });

    // ---------- Send ----------
    async function sendMessage(txt, imageDataUrls){
      if (!txt && (!imageDataUrls || !imageDataUrls.length)) return;

      if (!imageDataUrls) addUser(txt);

      const previous = history.slice();
      const loader = typing();

      try{
        const payload = {
          businessId: "redback",
          channel: "web_chat",
          message: txt,
          history: previous,
          leadState: loadLead(),
          conversationId: conversationId || undefined,
          images: imageDataUrls || []
        };

        const res = await fetch(API_URL, {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify(payload)
        });

        const data = await res.json().catch(() => ({}));
        loader.remove();

        const replyText = data.reply || "Sorry, I got a bit tangled there. Try that again for me?";
        addAI(replyText, data);

        if (data.conversationId) saveConversationId(data.conversationId);
        if (data.lead && typeof data.lead === "object") saveLead(data.lead);

        history.push({ role:"user", content: txt || "[photos uploaded]" });
        history.push({ role:"assistant", content: replyText });
        saveChat();
      }catch(err){
        console.error(err);
        loader.remove();
        addAI("Ah sorry, Tai got tangled in a web üï∑Ô∏èüòÇ\nGive it another try, or text photos + your suburb to 0459 272 402 and TJ or Marika will sort a quote.");
      }
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const txt = (input.value || "").trim();
      if (!txt) return;
      input.value = "";
      playSound("send");
      sendMessage(txt);
    });

    // Buttons inside chat (sms/book)
    messages.addEventListener("click", (e) => {
      const btn = e.target.closest(".rbx-link-btn");
      if (!btn) return;
      const href = btn.getAttribute("data-href");
      if (!href) return;
      playSound("tap");
      window.location.href = href;
    });

    // Quick replies
    if (quick){
      quick.addEventListener("click", (e) => {
        const btn = e.target.closest("button[data-text]");
        if (!btn) return;
        const txt = btn.getAttribute("data-text") || "";
        if (!txt) return;
        playSound("send");
        sendMessage(txt);
      });
    }

    // Wiggle once on scroll
    let wiggleDone = false;
    window.addEventListener("scroll", () => {
      if (wiggleDone || panel.style.display === "flex") return;
      wiggleDone = true;
      launcher.classList.remove("rbx-enter");
      launcher.classList.add("rbx-wiggle");
      setTimeout(() => {
        launcher.classList.remove("rbx-wiggle");
        launcher.classList.add("rbx-enter");
      }, 900);
    }, { passive:true });

  })();
</script>

<!-- ================= END WIDGET ================= -->



