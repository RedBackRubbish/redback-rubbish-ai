<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>RedBack Rubbish Removal | Brisbane Southside & Logan</title>

  <meta name="description"
        content="Family-run rubbish removal in Brisbane Southside & Logan. We load it, we sweep up, and we dispose of it for you. No Mess ‚Äî No Stress." />

  <!-- Favicon / Logo -->
  <link rel="icon" type="image/png" href="images/logo.png" />

  <!-- Open Graph -->
  <meta property="og:title" content="RedBack Rubbish Removal" />
  <meta property="og:description" content="No Mess ‚Äî No Stress. Rubbish removal done for you in Brisbane Southside & Logan." />
  <meta property="og:image" content="images/logo.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://redbackrubbishremoval.com/" />

  <link rel="stylesheet" href="CSS/styles.css" />
</head>
<body class="dark-frame">
  <!-- HEADER ---------------------------------------------------->
  <header class="site-header">
    <div class="container header-inner">
      <a href="#top" class="brand">
        <img src="images/logo.png" alt="RedBack Rubbish Removal logo" class="brand-logo">
        <div class="brand-text">
          <span class="brand-name">RedBack Rubbish Removal</span>
          <span class="brand-sub">Brisbane Southside &amp; Logan</span>
        </div>
      </a>

      <div class="header-actions">
        <div class="header-contact">
          <span class="header-label">Call us</span>
          <a href="tel:0459272402" class="header-phone">0459 272 402</a>
        </div>
        <div class="header-buttons">
          <a href="sms:0459272402?&body=Hi%20RedBack,%20I'd%20like%20to%20text%20photos%20for%20a%20quote."
             class="btn btn-ghost">
            Text photos for quote
          </a>
          <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c"
             class="btn btn-primary" target="_blank" rel="noopener">
            Book online
          </a>
        </div>
      </div>
    </div>
  </header>

  <main id="top">
    <!-- HERO --------------------------------------------------->
    <section class="hero hero-family">
      <div class="container hero-inner">
        <div class="hero-copy">
          <span class="pill pill-light">Family-run ‚Ä¢ Fully insured ‚Ä¢ Local</span>

          <h1>Rubbish removal done for you ‚Äì fast, friendly &amp; affordable.</h1>

          <p class="hero-sub">
            We load it, we sweep up, and we dispose of it properly.<br>
            You get your space back ‚Äì with <strong>No Mess ‚Äî No Stress.</strong>
          </p>

          <div class="hero-cta">
            <a href="tel:0459272402" class="btn btn-primary">üìû Call now</a>
            <a href="sms:0459272402?&body=Hi%20RedBack,%20I'd%20like%20to%20text%20photos%20for%20a%20quote."
               class="btn btn-outline">
              üì∑ Text photos for a quote
            </a>
          </div>

          <div class="hero-trust">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <div class="trust-copy">
              <p>Trusted by Brisbane Southside &amp; Logan locals.</p>
              <p class="small">On-time, uniformed &amp; respectful in your home or workplace.</p>
            </div>
          </div>
        </div>

        <!-- New premium hero media block (desktop) -->
        <div class="hero-media circle-hero">
  <div class="circle-photo-wrap">
    <img src="images/family-cab.jpg" alt="RedBack family" />
  </div>
  <div class="hero-badge">Real family business ‚Ä¢ Real people ‚Ä¢ Real results</div>
</div>
 </div>
    </section>

    <!-- WHY / TRUST -------------------------------------------->
    <section class="section section-light">
      <div class="container">
        <div class="section-header">
          <h2>Why locals choose RedBack</h2>
          <p>We treat every job like it‚Äôs our own place ‚Äì fast, tidy, and respectful.</p>
        </div>

        <div class="grid-4">
          <article class="card">
            <h3>Family-run &amp; local</h3>
            <p>You‚Äôre dealing directly with a Brisbane Southside &amp; Logan family business ‚Äì not a big franchise.</p>
          </article>
          <article class="card">
            <h3>We do the heavy lifting</h3>
            <p>We load, lift, carry and sweep up so you don‚Äôt have to touch a thing.</p>
          </article>
          <article class="card">
            <h3>Clear upfront pricing</h3>
            <p>Trailer load pricing with no hidden fees. Tip fees included in your quote.</p>
          </article>
          <article class="card">
            <h3>Fully insured &amp; uniformed</h3>
            <p>Professional appearance, fully insured, and respectful on every property.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- SERVICES ----------------------------------------------->
    <section class="section">
      <div class="container">
        <div class="section-header">
          <h2>Rubbish removal services</h2>
          <p>From single items to full cleanouts ‚Äì if it fits in our trailer, we‚Äôll handle it.</p>
        </div>

        <div class="grid-3">
          <article class="card service-card">
            <h3>Household cleanouts</h3>
            <p>Old furniture, broken appliances, general household junk and more.</p>
            <ul>
              <li>Garage &amp; shed cleanouts</li>
              <li>End-of-lease rubbish</li>
              <li>Deceased estate support</li>
            </ul>
          </article>

          <article class="card service-card">
            <h3>Yard &amp; green waste</h3>
            <p>Branches, clippings, old timber, outdoor junk and garden waste.</p>
            <ul>
              <li>Storm cleanups</li>
              <li>Overgrown yard clear-outs</li>
              <li>Outdoor furniture removal</li>
            </ul>
          </article>

          <article class="card service-card">
            <h3>Real estate &amp; rentals</h3>
            <p>Fast, reliable service for agents, landlords and body corporates.</p>
            <ul>
              <li>Pre-sale cleanups</li>
              <li>Post-tenant rubbish removal</li>
              <li>Garage &amp; storage unit clear-outs</li>
            </ul>
          </article>
        </div>

        <div class="grid-3 services-extra">
          <article class="card service-card">
            <h3>Office &amp; commercial</h3>
            <p>Old desks, shelving, shop fittings and general commercial waste.</p>
          </article>

          <article class="card service-card">
            <h3>A ‚Üí B item delivery</h3>
            <p>Need something moved from A to B? If it fits in the trailer, we can shift it.</p>
            <p class="small">Great for marketplace or bulky-item purchases.</p>
          </article>

          <article class="card service-card">
            <h3>Custom jobs</h3>
            <p>Not sure if we can take it? Just send us a photo and we‚Äôll confirm.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- PRICING ------------------------------------------------->
    <section class="section section-cream" id="pricing">
      <div class="container">
        <div class="section-header">
          <h2>Simple trailer-load pricing</h2>
          <p>Honest, upfront pricing based on how much space your rubbish takes in our trailer.</p>
        </div>

        <div class="grid-3 pricing-grid">
          <article class="card card-pricing">
            <div class="pill pill-soft">Light loads</div>
            <h3>Quarter load</h3>
            <p class="price">From $130</p>
            <p>Perfect for a few bulky items or a small cleanout.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Ideal for single rooms or light jobs</li>
            </ul>
          </article>

          <article class="card card-pricing card-pricing-featured">
            <div class="pill pill-strong">Most popular</div>
            <h3>Half load</h3>
            <p class="price">From $320</p>
            <p>Great for garage, shed or mixed household rubbish.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Best value for typical jobs</li>
            </ul>
          </article>

          <article class="card card-pricing">
            <div class="pill pill-soft">Big cleanouts</div>
            <h3>Full load</h3>
            <p class="price">From $550</p>
            <p>For full property cleanouts and major declutters.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Multiple loads available</li>
            </ul>
          </article>
        </div>

        <p class="small align-center">
          Final price depends on access, type of material and total volume.
          Text us photos for a fast, no-obligation quote.
        </p>
      </div>
    </section>

    <!-- HOW IT WORKS ------------------------------------------->
    <section class="section">
      <div class="container">
        <div class="section-header">
          <h2>How it works</h2>
          <p>We keep it simple so you can get on with your day.</p>
        </div>

        <div class="grid-3 steps-grid">
          <article class="card step-card">
            <div class="step-number">1</div>
            <h3>Send us photos</h3>
            <p>Text or email photos of what you want gone ‚Äì or book a visit.</p>
          </article>

          <article class="card step-card">
            <div class="step-number">2</div>
            <h3>Get a clear quote</h3>
            <p>We confirm your price upfront. No hidden fees or surprise add-ons.</p>
          </article>

          <article class="card step-card">
            <div class="step-number">3</div>
            <h3>We load &amp; sweep up</h3>
            <p>On the day, we arrive on time, load everything and leave it tidy.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- GALLERY ------------------------------------------------->
    <section class="section section-light" id="gallery">
      <div class="container">
        <div class="section-header">
          <h2>Recent jobs we‚Äôve completed</h2>
          <p>Real jobs from Brisbane Southside &amp; Logan clients.</p>
        </div>

        <div class="gallery-grid">
          <figure class="gallery-item">
            <img src="images/green-waste.jpg" alt="Green waste cleanup after storm" />
            <figcaption>Green waste cleared and taken away.</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/storage-unit.jpg" alt="Storage unit rubbish removal job" />
            <figcaption>Storage unit completely emptied and swept.</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/gym-equipment.jpg" alt="Old gym equipment removal job" />
            <figcaption>Heavy gym equipment safely removed.</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/boxes-delivery.jpg" alt="Boxes and furniture loaded for delivery" />
            <figcaption>Boxes &amp; furniture picked up and delivered.</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- AREAS WE COVER ----------------------------------------->
   <section class="section section-dark">
       <div class="container">
        <div class="section-header">
          <h2>Areas we cover</h2>
          <p>Based on Brisbane Southside &amp; Logan, with flexible coverage nearby.</p>
        </div>

        <div class="areas-grid">
          <ul class="areas-list">
  <li>Rochedale South</li>
  <li>Rochedale</li>
  <li>Underwood</li>
  <li>Springwood</li>
  <li>Slacks Creek</li>
  <li>Daisy Hill</li>
  <li>Logan Central</li>
  <li>Woodridge</li>
  <li>Kingston</li>
  <li>Loganlea</li>
  <li>Marsden</li>
  <li>Crestmead</li>
  <li>Meadowbrook</li>
  <li>Heritage Park</li>
  <li>Hillcrest</li>
  <li>Regents Park</li>
  <li>Browns Plains</li>
  <li>Berrinba</li>
  <li>Shailer Park</li>
  <li>Tanah Merah</li>
  <li>Eight Mile Plains</li>
  <li>Kuraby</li>
  <li>Runcorn</li>
  <li>Sunnybank Hills</li>
  <li>Upper Mount Gravatt</li>
  <li>Wishart</li>
  <li>Carindale</li>
  <li>Carina Heights</li>
  <li>Holland Park</li>
  <li>Holland Park West</li>
  <li>Calamvale</li>
  <li>Parkinson</li>
  <li>Drewvale</li>
  <li>Algester</li>
  <li>Priestdale</li>
  <li>Burbank</li>
  <li>Capalaba</li>
  <li>Chandler</li>
  <li>And surrounding suburbs within ~20 km of Rochedale South</li>
</ul>

          <div class="areas-card card">
            <h3>Not sure if you‚Äôre in range?</h3>
            <p>Send us your address and a quick photo of what needs to go. We‚Äôll confirm if we can help and what it will cost.</p>
            <a href="sms:0459272402?&body=Hi%20RedBack,%20checking%20if%20I%27m%20in%20your%20service%20area."
               class="btn btn-outline">
              Text us your suburb
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- REVIEWS ------------------------------------------------->
    <section class="section section-cream" id="reviews">
      <div class="container">
        <div class="section-header">
          <h2>What our customers say</h2>
          <p>Real feedback from people we‚Äôve helped.</p>
        </div>

        <div class="grid-3 reviews-grid">
          <article class="card review-card">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúTurned up on time, cleared everything quickly and left the area spotless. Super friendly husband and wife and easy to deal with.‚Äù</p>
            <p class="review-name">‚Äî Mark W. - Waterford</p>
          </article>

          <article class="card review-card">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúUsed TJ for a rental cleanout. Great communication, fair price and the place looked 100x better afterwards.‚Äù</p>
            <p class="review-name">‚Äî Karen A. - Forest Lake</p>
          </article>

          <article class="card review-card">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúMade a big job feel easy. They loaded everything and swept up ‚Äì worth every dollar.‚Äù</p>
            <p class="review-name">‚Äî Andy S. - Kingston</p>
          </article>
        </div>
      </div>
    </section>

    <!-- CONTACT / FINAL CTA ------------------------------------>
    <section class="section section-dark" id="contact">
      <div class="container contact-grid">
        <div>
          <h2>Ready to clear the clutter?</h2>
          <p>Send us photos of your rubbish or give us a quick call. We‚Äôll come back with a clear, upfront quote.</p>

          <div class="contact-cta">
            <a href="tel:0459272402" class="btn btn-primary">üìû Call 0459 272 402</a>
            <a href="sms:0459272402?&body=Hi%20RedBack,%20I%27d%20like%20to%20text%20photos%20for%20a%20rubbish%20quote."
               class="btn btn-ghost-light">
              üì∑ Text photos for a quote
            </a>
          </div>

          <p class="small contact-note">
            Prefer to book online?
            <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c" target="_blank" rel="noopener">
              Click here to use our online booking form.
            </a>
          </p>
        </div>

        <div class="contact-details card">
          <h3>Business details</h3>
          <ul class="contact-list">
            <li><strong>Service area:</strong> Brisbane Southside &amp; Logan</li>
            <li><strong>Hours:</strong> Monday‚ÄìSaturday (flexible by appointment)</li>
            <li><strong>ABN:</strong> 54532714102</li>
            <li><strong>Email:</strong> <a href="mailto:info@redbackrubbishremoval.com">info@redbackrubbishremoval.com</a></li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER --------------------------------------------------->
  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <span>¬© <span id="year"></span> RedBack Rubbish Removal.</span>
        <span>No Mess ‚Äî No Stress.</span>
      </div>
      <div class="footer-right">
        <span>Brisbane Southside &amp; Logan</span>
      </div>
    </div>
  </footer>

  <script>
    // Simple year fill
    document.addEventListener('DOMContentLoaded', function () {
      var y = new Date().getFullYear();
      var el = document.getElementById('year');
      if (el) el.textContent = y;
    });
  </script>

  <!-- MOBILE STICKY BAR --------------------------------------->
  <div class="mobile-bar">
    <a href="tel:0459272402">Call</a>
    <a href="sms:0459272402?&body=Hi%20RedBack,%20I%27d%20like%20a%20rubbish%20removal%20quote.">Text photos</a>
    <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c" target="_blank" rel="noopener">Book online</a>
  </div>

    export default {
  async fetch(request, env) {
    const allow = {
      "Access-Control-Allow-Origin": request.headers.get("Origin") || "*",
      "Access-Control-Allow-Methods": "POST, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type"
    };

    // Preflight
    if (request.method === "OPTIONS") {
      return new Response(null, { status: 204, headers: allow });
    }

    // Only POST
    if (request.method !== "POST") {
      return new Response(
        JSON.stringify({ error: "POST only." }),
        { status: 405, headers: allow }
      );
    }

    // API key check
    if (!env.OPENAI_API_KEY) {
      return new Response(
        JSON.stringify({ error: "Missing OPENAI_API_KEY" }),
        { status: 500, headers: allow }
      );
    }

    let body = {};
    try { body = await request.json(); } catch {}

    const message = (body.message || "").trim();
    const history = Array.isArray(body.history) ? body.history : [];

    // Fallback greeting if no message
    if (!message) {
      return new Response(
        JSON.stringify({
          reply: "G‚Äôday! I‚Äôm Tai üëã I help out TJ & Marika from RedBack Rubbish Removal. What are you tossing and which suburb?"
        }),
        { headers: allow }
      );
    }

    const systemPrompt = `
You are Tai, the friendly helper on the RedBack Rubbish Removal website.

PROFILE & ROLE
- You are the website chat helper for RedBack Rubbish Removal.
- RedBack is a family-run business owned by TJ & Marika.
- Service area: Brisbane Southside & Logan (and nearby suburbs).
- Services: rubbish removal, green waste, furniture removal, household junk, garage/shed cleanouts, deceased estates, and small A‚ÜíB moves if it fits in the trailer.
- Your mission: help visitors understand the service and move them towards a quote or booking.

TONE
- Aussie, local, friendly.
- Short replies, no fluff. Aim for 1‚Äì3 short sentences.
- Down-to-earth, a little cheeky, but always respectful and professional.
- Write like SMS/Messenger, not like an email.

BASIC BUSINESS FACTS
- Pricing is mainly based on trailer load size (quarter, half, three-quarter, full, XL) plus access/material type.
- Safe rough ballparks you may use (always say they're rough guides):
  - Quarter load: around $130‚Äì$150 for lighter, easy-access loads.
  - Half load: often in the low $300s.
  - Three-quarter load: usually in the low-to-mid $400s.
  - Full load: usually mid-$500s and up for big cleanouts.
- Best way to quote properly: ask them to text clear photos + their suburb to 0459 272 402.
- Online booking link: https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c

LOAD SIZE EXPLANATIONS
- If they ask about load sizes, give a simple, visual explanation such as:
  - Quarter load ‚âà small pile / about 1 box trailer.
  - Half load ‚âà small room or a mix of furniture and bags.
  - Three-quarter ‚âà big garage / shed cleanout.
  - Full load ‚âà major cleanout, lots of furniture/junk.
- Combine this with the rough price ranges above.
- Always repeat that final price depends on access, weight, tip fees, and what's in the load.

GUIDED BOOKING FUNNEL (VERY IMPORTANT)
Whenever they show interest in a quote or booking (e.g. ‚Äúhow much‚Äù, ‚Äúcan I book‚Äù, ‚ÄúI‚Äôm ready to book‚Äù, ‚Äúneed a pickup‚Äù):

1) STEP 1 ‚Äì SUBURB
   - Ask for which suburb they‚Äôre in (if you don‚Äôt already know).
   - If they already told you a suburb earlier, remember and use it instead of asking again.

2) STEP 2 ‚Äì WHAT THEY‚ÄôRE TOSSING / LOAD SIZE
   - Ask for a rough description:
     - What‚Äôs going? (e.g. ‚Äúold couch + boxes‚Äù, ‚Äúgreen waste‚Äù, ‚Äúwhole garage‚Äù)
     - Rough load size if they know (quarter/half/full etc).

3) STEP 3 ‚Äì ACCESS
   - Ask 1‚Äì2 quick questions about access:
     - Is it inside or outside?
     - Any stairs / long driveway / tricky access?

4) STEP 4 ‚Äì TIMING
   - Ask when they‚Äôd ideally like it done (e.g. ‚Äúthis week‚Äù, ‚ÄúSaturday morning‚Äù, ‚ÄúASAP‚Äù).

5) STEP 5 ‚Äì CLOSE
   - Summarise what they‚Äôve told you in 1 short sentence.
   - Then give clear next steps:
     - Suggest texting photos + suburb to 0459 272 402 for a proper quote and confirmation.
     - Optionally also mention they can book online via the booking link.

Only ask 1‚Äì2 questions per message so it feels like a real chat, not a form.

NAME & SUBURB MEMORY
- If they tell you their name (e.g. ‚ÄúI‚Äôm Sarah‚Äù) or suburb (‚ÄúI‚Äôm in Rochedale South‚Äù), remember it for the rest of the chat.
- Use their name naturally from time to time (every few replies at most), e.g. ‚ÄúNo worries Sarah,‚Äù or ‚ÄúIn Rochedale South we can usually fit you in pretty quickly.‚Äù
- Don‚Äôt overdo it or repeat the name every sentence.

HOW TO HANDLE COMMON INTENTS

1) PRICE / QUOTE QUESTIONS
- If they ask "how much", "price", "rough cost", etc:
  - Give a rough ballpark using the load sizes, clearly marked as an estimate.
  - Immediately guide into the booking funnel steps described above.
  - Always suggest texting photos + suburb to 0459 272 402 for a proper quote.

2) AVAILABILITY / WHEN CAN YOU COME?
- Give a simple, safe answer:
  - "We can usually fit people in within 24‚Äì48 hours depending on suburb and load size."
- Then drop into the funnel:
  - Ask for suburb.
  - Ask what they‚Äôre tossing.
  - Suggest photos + suburb to 0459 272 402.

3) SERVICE AREAS
- If they ask "do you come to X":
  - If X is clearly in/near Brisbane Southside & Logan, say yes.
  - If X is clearly far away (like Sydney, Melbourne, overseas), politely say it‚Äôs out of range.
- Always follow up with:
  - "What are you tossing?" or
  - "If you‚Äôre nearby, text photos + suburb to 0459 272 402 and the team will confirm."

4) WHAT YOU TAKE / DON‚ÄôT TAKE
- You CAN say you usually take:
  - General household junk, old furniture, mattresses, broken appliances (where safe to handle), bags/boxes, garage & shed cleanouts, green waste, small A‚ÜíB moves if it fits in the trailer.
- You SHOULD say:
  - Some things (like chemicals, paint, fuel, asbestos, large concrete rubble and other hazardous waste) may not be suitable.
  - If you‚Äôre unsure, ask for photos and say TJ & Marika will confirm.
- Always push: "Text photos + suburb to 0459 272 402 and they‚Äôll let you know what‚Äôs possible."

5) BOOKING / NEXT STEPS
- If they want to book:
  - Offer both options:
    - Call/SMS 0459 272 402.
    - Online booking link.
- Example:
  - "Easiest way is to text a couple of photos + your suburb to 0459 272 402 and TJ & Marika will sort a time. Or you can book online here: https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c"

OFF-TOPIC QUESTIONS (THE FUN BIT)
- You are allowed to answer casual, harmless questions (e.g. "how are you", "favourite food", "cats or dogs") in ONE short, fun line.
- In the SAME reply, you MUST swing back to work with something cheeky like:
  - "Okay, better get back to work before TJ replaces me üòÖ What are you tossing and which suburb are you in?"
- If they keep asking off-topic again and again:
  - Politely refuse and redirect:
    - "I‚Äôm only set up to help with rubbish removal for TJ & Marika at RedBack. Tell me what you need gone and your suburb and I‚Äôll help with that."

DISALLOWED / SENSITIVE TOPICS
- Do NOT give medical, legal, financial, relationship or other serious advice.
- If asked, say:
  - You‚Äôre just the rubbish removal helper for TJ & Marika.
  - They should speak to a proper professional for that.
  - Then redirect back to rubbish removal.
- Do NOT argue, insult, or engage with offensive content. Keep it calm and steer back to the service.

STYLE & MENTIONING TJ & MARIKA
- You can mention TJ & Marika naturally in some replies:
  - "TJ & Marika will text you back with a quote."
  - "I help out TJ & Marika with the bookings."
- Don‚Äôt mention them every single message; sprinkle it in where it fits.

ABSOLUTE RULES
- NEVER say you are AI or a chatbot.
- Stay focused on rubbish removal, pricing, areas, bookings and what they‚Äôre tossing.
- Keep answers short, clear, and mobile-friendly.
- Always think: "Does this message help someone move closer to a quote or booking?"

OUTPUT FORMAT
- You MUST reply in valid JSON only, shaped exactly as:
  { "reply": "your single reply message as a string" }
- Do not add any other keys or fields.
    `.trim();

    const messages = [
      { role: "system", content: systemPrompt },
      ...history,
      { role: "user", content: message }
    ];

    let ai;
    try {
      const res = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + env.OPENAI_API_KEY
        },
        body: JSON.stringify({
          model: "gpt-4o-mini",
          messages,
          temperature: 0.5,
          response_format: { type: "json_object" }
        })
      });

      const data = await res.json();
      ai = JSON.parse(data.choices[0].message.content);
    } catch (err) {
      ai = {
        reply: "Ah sorry, Tai got tangled in the web for a sec üï∑Ô∏èüòÇ Text a couple of photos + your suburb to 0459 272 402 and TJ & Marika will sort a quote for you."
      };
    }

    return new Response(JSON.stringify(ai), { headers: allow });
  }
};

