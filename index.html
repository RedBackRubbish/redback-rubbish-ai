<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>RedBack Rubbish Removal | Brisbane Southside & Logan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Premium rubbish removal in Brisbane Southside & Logan. Family-run, fully insured and no-stress service with upfront prices and all the heavy lifting done for you."/>
  <link rel="icon" type="image/png" href="images/logo.png"/>

  <meta property="og:title" content="RedBack Rubbish Removal"/>
  <meta property="og:description" content="No Mess ‚Äî No Stress. Text photos for a fast rubbish removal quote."/>
  <meta property="og:image" content="images/couch-twins.png"/>

  <link rel="stylesheet" href="CSS/styles.css"/>
</head>
<body>

  <!-- Mobile bottom bar -->
  <div class="mobile-cta-bar">
    <a
      href="sms:0459272402?body=Hi%20RedBack%2C%20I%20like%20a%20rubbish%20removal%20quote%20please."
      class="mobile-cta-btn mobile-cta-text-only">
      Text photos for a fast quote
    </a>
  </div>

  <!-- TAI AI WIDGET -->
  <div class="mascot-widget" aria-live="polite">
    <!-- Hint bubble -->
    <div class="mascot-hint has-text" aria-hidden="false">
      üëã Hey I‚Äôm Tai ‚Äî Tap to chat!
    </div>

    <!-- Chat panel -->
    <div class="mascot-panel" aria-label="Chat with Tai, the Lil RedBack">
      <div class="mascot-chat-log" id="tai-chat-log" aria-live="polite"></div>

      <!-- Input row only -->
      <div class="mascot-chat-form" id="tai-chat-form">
        <input type="text" id="tai-chat-input" placeholder="Type your question here..." />
        <button type="button" id="tai-chat-send">Send</button>
      </div>

      <p class="mascot-footer-note">
        Want a same-day quote? You can also text photos to <a href="sms:0459272402">0459 272 402</a>.
      </p>

      <button class="mascot-close" type="button">Close</button>
    </div>

    <!-- Floating avatar -->
    <button title="Chat with Tai" class="mascot-toggle" type="button">
      <img src="images/mascots/mascot-head.png" alt="Lil RedBack"/>
    </button>
  </div>

  <!-- (Top SMS bar is disabled in CSS, but keeping markup if we ever want it back) -->
  <div class="top-bar">
    <div class="container top-bar-inner">
      <span class="top-tagline">NO MESS ‚Äî NO STRESS</span>
      <a class="top-phone" href="tel:0459272402">Call 0459 272 402</a>
      <a class="top-email" href="mailto:info@redbackrubbishremoval.com?subject=Rubbish%20Removal%20Quote&amp;body=Hi%20RedBack%2C%0D%0A%0D%0AMy%20suburb%20is%20________.%0D%0AWhat%20I%20need%20gone%20is%3A%20________.%0D%0AI%20can%20attach%20photos%20to%20this%20email.%0D%0A">Email</a>
    </div>
  </div>

  <!-- Header (clean & simple) -->
  <header class="site-header">
  <div class="container header-inner">
    <div class="brand">
      <img src="images/logo.png" class="brand-logo" alt="RedBack Rubbish Removal logo" />
      <div class="brand-text">
        <span class="brand-name">REDBACK RUBBISH REMOVAL</span>
        <span class="brand-location">Brisbane Southside &amp; Logan</span>
      </div>
    </div>

    <nav class="nav">
      <a href="#book-quote" class="header-book-link">Book / Quote</a>
    </nav>
  </div>
</header>


  <!-- HERO -->
  <section class="hero">
    <div class="hero-bg"></div>

    <div class="container hero-inner">
      <div class="hero-left">
        <p class="hero-location">BRISBANE SOUTHSIDE &amp; LOGAN</p>
        <h1 class="hero-title">Rubbish Removal<br>Made Simple</h1>
        <p class="hero-subtitle">You point ‚Äî we load &amp; clean ‚Äî easy.</p>

<p class="hero-rating">
  <span class="hero-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
  <span class="hero-rating-text">Local family-run junk removal</span>
</p>
<p class="hero-price">Small loads from $150 (incl. GST).</p>


        <div class="hero-cta-row">
          <div class="hero-sms-box">
            <label for="suburb-input" class="hero-label">Text photos for a fast quote</label>
            <div class="hero-sms-input-row">
              <input id="suburb-input" type="text" placeholder="e.g. Rochedale South"/>
              <button type="button" class="btn-primary hero-btn" onclick="openSmsQuote()">Text My Free Quote</button>
            </div>
            <p class="hero-note">
              We‚Äôll open your SMS app with your suburb pre-filled so you can send photos for a same-day quote.
            </p>
          </div>
        </div>

        <ul class="hero-trust-list">
          <li>‚úî Family owned &amp; operated</li>
          <li>‚úî Fully insured</li>
          <li>‚úî Friendly, uniformed team</li>
          <li>‚úî We load, sweep &amp; dispose</li>
        </ul>
      </div>

      <!-- Right column left empty on purpose (background carries the image) -->
      <div class="hero-right"></div>
    </div>
  </section>

  <!-- How it works -->
  <section class="section how-section" id="how-it-works">
    <div class="container how-inner">
      <h2 class="section-title how-title">How It Works</h2>
      <p class="section-subtitle how-subtitle">Three quick steps from photos to a clean space.</p>

      <div class="how-visual">
        <img src="images/mascots/lilredback_howitworks.png"
             alt="Lil RedBack pointing at how it works board"
             class="how-it-works-illustration"/>
      </div>

      <div class="how-steps-simple">
        <div class="how-step-simple">
          <div class="how-icon-circle how-icon-red">
            <svg viewBox="0 0 40 40" aria-hidden="true" focusable="false">
              <circle cx="20" cy="20" r="20"></circle>
              <rect x="10" y="14" width="20" height="14" rx="2" ry="2" fill="none" stroke="white" stroke-width="2"></rect>
              <circle cx="16" cy="21" r="3" fill="none" stroke="white" stroke-width="2"></circle>
              <polyline points="18,12 22,8 26,12" fill="none" stroke="white" stroke-width="2"></polyline>
            </svg>
          </div>
          <div class="how-text">
            <div class="how-label">1. Send photos &amp; suburb</div>
            <p>Text or email photos of the load and your suburb. We‚Äôll give you an upfront quote.</p>
          </div>
        </div>

        <div class="how-step-simple">
          <div class="how-icon-circle how-icon-white">
            <svg viewBox="0 0 40 40" aria-hidden="true" focusable="false">
              <circle cx="20" cy="20" r="20"></circle>
              <polyline points="12,20 17,25 28,14" fill="none" stroke="#be1e2d" stroke-width="3"></polyline>
            </svg>
          </div>
          <div class="how-text">
            <div class="how-label">2. We confirm &amp; book you in</div>
            <p>We lock in a time window and send you a confirmation SMS so you know exactly when we‚Äôre coming.</p>
          </div>
        </div>

        <div class="how-step-simple">
          <div class="how-icon-circle how-icon-black">
            <svg viewBox="0 0 40 40" aria-hidden="true" focusable="false">
              <circle cx="20" cy="20" r="20"></circle>
              <polyline points="12,24 16,24 18,20 22,20 24,24 28,24" fill="none" stroke="white" stroke-width="2"></polyline>
              <polyline points="12,18 16,16 18,12 22,12 24,16 28,18" fill="none" stroke="white" stroke-width="2"></polyline>
            </svg>
          </div>
          <div class="how-text">
            <div class="how-label">3. We load, sweep &amp; dispose</div>
            <p>We do all the heavy lifting and sweep up before we leave so you get your space back, tidy and ready to use.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- What we take -->
  <section class="section section-red" id="what-we-take">
    <div class="container">
      <h2 class="section-title section-title-on-dark">What We Take</h2>

      <div class="section-mascot-inline">
        <img src="images/mascots/lilredback_3.png" alt="Lil RedBack waving next to What We Take">
      </div>

      <p class="section-subtitle section-subtitle-on-dark">
        From storage sheds and spare rooms to garages and green waste, we handle the heavy stuff so you don‚Äôt have to.
      </p>

      <div class="cards-grid">
        <article class="card">
          <img src="images/storage-unit.jpg" alt="Storage unit with furniture and boxes"/>
          <div class="card-body">
            <h3>Household Junk &amp; Storage</h3>
            <p>Old furniture, mattresses, boxes, tenants‚Äô left-behind items and more.</p>
          </div>
        </article>

        <article class="card">
          <img src="images/gym-equipment.jpg" alt="Gym equipment loaded on trailer"/>
          <div class="card-body">
            <h3>Garage, Shed &amp; Gym Clean-Outs</h3>
            <p>Weights, benches, tools and clutter that‚Äôs built up over the years.</p>
          </div>
        </article>

        <article class="card">
          <img src="images/green-waste.jpg" alt="Green waste and branches"/>
          <div class="card-body">
            <h3>Green Waste</h3>
            <p>Branches, palm fronds, garden clean-ups and storm debris.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- A‚ÄìB Moves banner -->
  <section class="section section-ab-banner">
    <div class="container ab-banner">
      <div class="ab-banner-text">
        <h2 class="ab-banner-title">We Also Do Small A ‚Üí B Moves</h2>
        <p class="ab-banner-copy">
          Just need a couch, a few bulky items or some boxes moved from one place to another?
          Our family team can help with simple A ‚Üí B moves without the stress of hiring a truck.
        </p>
        <ul class="ab-banner-list">
          <li>‚úî Great for marketplace / Gumtree pickups</li>
          <li>‚úî Small-load furniture moves from $100 (incl. GST)</li>
          <li>‚úî We load, secure and unload for you</li>
        </ul>
        <a href="#book-quote" class="btn-primary ab-banner-btn">Book A ‚Üí B Move</a>
      </div>
      <div class="ab-banner-image">
        <img src="images/couch-twins.png" alt="RedBack mascots carrying a couch for an A to B move">
      </div>
    </div>
  </section>

  <!-- Pricing -->
  <section class="section section-cream" id="pricing">
    <div class="container">
      <h2 class="section-title">Upfront Pricing</h2>
      <p class="section-subtitle">We‚Äôll always confirm the price before we start loading.</p>

      <div class="pricing-grid">
        <div class="price-card">
          <h3>Small Load</h3>
          <p class="price">From $150‚Äì$220 (incl. GST)</p>
          <p class="price-note">Good for a few bulky items or a small room‚Äôs worth.</p>
        </div>

        <div class="price-card price-card-featured">
          <h3>Half Load</h3>
          <p class="price">From $330 (incl. GST)</p>
          <p class="price-note">Popular for standard garage or shed clear-outs.</p>
        </div>

        <div class="price-card">
          <h3>Full Load</h3>
          <p class="price">From $550 (incl. GST)</p>
          <p class="price-note">Great for moves, big clear-outs and deceased estates.</p>
        </div>
      </div>

      <h3 class="pricing-subheading">Specialty Service Pricing</h3>

      <div class="pricing-grid pricing-grid-special">
        <div class="price-card">
          <h3>A‚ÄìB Delivery (Small Load)</h3>
          <p class="price">From $100 (incl. GST)</p>
          <p class="price-note">Pickup &amp; drop-off of boxes, furniture or household items.</p>
        </div>

        <div class="price-card">
          <h3>Green Waste Loads</h3>
          <p class="price">Quoted Per Job</p>
          <p class="price-note">Palm fronds, branches, yard clean-ups and storm debris.</p>
        </div>
      </div>

      <p class="pricing-footnote">
        Tip fees for standard household loads are included. Extra-heavy items or special disposal needs may be quoted separately.
      </p>
    </div>
  </section>

  <!-- Why choose us -->
  <section class="section section-light" id="why-redback">
    <div class="container why-grid">
      <div class="why-intro">
        <h2 class="section-title">Why Choose RedBack</h2>
        <p class="section-subtitle">
          We run RedBack like a premium tradie service ‚Äì sharp communication, sharp presentation and reliable service every time.
        </p>
      </div>

      <div class="why-cards">
        <article class="why-card">
          <div class="why-icon">‚è±Ô∏è</div>
          <h3>Fast Responses</h3>
          <p>We reply quickly to texts and online bookings so you‚Äôre never left wondering.</p>
        </article>

        <article class="why-card">
          <div class="why-icon">üßπ</div>
          <h3>All The Heavy Lifting</h3>
          <p>We load, lift and sweep ‚Äì you don‚Äôt touch a thing. Perfect for busy families and owners.</p>
        </article>

        <article class="why-card">
          <div class="why-icon">‚ôªÔ∏è</div>
          <h3>Recycle &amp; Donate</h3>
          <p>Wherever we can, we keep items out of landfill by recycling or donating.</p>
        </article>

        <article class="why-card">
          <div class="why-icon">üë®‚Äçüë©‚Äçüë¶</div>
          <h3>Family Owned &amp; Operated</h3>
          <p>We‚Äôre a local family business ‚Äì we treat your place like our own and we genuinely care.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- Reviews -->
  <section class="section section-dark">
    <div class="container reviews-grid">
      <div class="reviews-intro">
        <h2 class="section-title section-title-on-dark">Real People. Real Clean-Ups.</h2>
        <p class="section-subtitle section-subtitle-on-dark">
          We treat every job like it‚Äôs our own home or yard. Friendly, on-time and we leave things tidy.
        </p>
      </div>

      <div class="reviews-cards">
        <article class="review-card">
          <p class="review-text">
            ‚ÄúSo easy. I sent a couple of photos and had a quote back in minutes. They turned up on time, loaded everything and swept up. Highly recommend.‚Äù
          </p>
          <p class="review-name">‚Äì Local Homeowner</p>
        </article>

        <article class="review-card">
          <p class="review-text">
            ‚ÄúHelped us clear out a garage and some green waste. Friendly, professional and very fair pricing.‚Äù
          </p>
          <p class="review-name">‚Äì Property Manager</p>
        </article>

        <article class="review-card">
          <p class="review-text">
            ‚ÄúFamily-run business that really cares. They kept me updated by SMS the whole way through.‚Äù
          </p>
          <p class="review-name">‚Äì Repeat Client</p>
        </article>
      </div>
    </div>
  </section>

  <!-- Book / Quote -->
  <section class="section section-cream" id="book-quote">
    <div class="container book-grid">
      <div class="book-column">
        <h2 class="section-title">Book Or Get A Quote</h2>
        <p class="section-subtitle">Choose the option that‚Äôs easiest for you.</p>

        <ul class="book-list">
          <li>üì∏ <strong>Text photos &amp; suburb</strong> to <a href="sms:0459272402">0459 272 402</a></li>
          <li>üìù <strong>Use the online form</strong> below for a detailed booking</li>
          <li>üìû <strong>Prefer to chat?</strong> Call us to talk it through</li>
        </ul>

        <ul class="book-list">
          <li>‚úî Family owned &amp; operated (we only bring our son along on weekend jobs)</li>
          <li>‚úî Fully insured</li>
          <li>‚úî Clear communication and reminders</li>
          <li>‚úî We sweep up before we leave</li>
        </ul>

        <div class="book-quick-cta">
          <a href="tel:0459272402" class="btn-outline">Call Now</a>
          <a href="sms:0459272402?&body=Hi%20RedBack%2C%20I%E2%80%99d%20like%20to%20book%20a%20rubbish%20removal.%20I%20can%20send%20photos." class="btn-outline">Text Photos</a>
        </div>
      </div>

      <div class="book-column">
        <div class="booking-card">
          <p class="form-label">Online booking form ‚Äî Jobber</p>

          <div class="booking-disclaimer">
            ‚ö†Ô∏è <strong>Note:</strong> Prices below may not include GST.
            Please see the <a href="#pricing">pricing section above</a> for final GST-inclusive rates.
          </div>

          <div class="jobber-embed">
            <iframe
              loading="lazy"
              src="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c"
              title="Book RedBack Rubbish Removal">
            </iframe>
          </div>
        </div>

        <div class="booking-card">
          <p class="form-label">Prefer email?</p>
          <p class="form-text">
            Email us with your suburb, a short description and any photos you can attach. We‚Äôll reply with options.
          </p>
          <a class="btn-primary btn-full"
             href="mailto:info@redbackrubbishremoval.com?subject=Rubbish%20Removal%20Quote&amp;body=Hi%20RedBack%2C%0D%0A%0D%0AMy%20suburb%20is%20________.%0D%0AWhat%20I%20need%20gone%20is%3A%20________.%0D%0AI%20can%20attach%20photos%20to%20this%20email.%0D%0A">
            Email My Details
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <strong>RedBack Rubbish Removal</strong><br/>
        ABN 54532714102 ¬∑ Family owned &amp; operated ¬∑ Fully insured
      </div>
      <div class="footer-contact">
        <a href="tel:0459272402">0459 272 402</a>
        <span>¬∑</span>
        <a href="mailto:info@redbackrubbishremoval.com">info@redbackrubbishremoval.com</a>
      </div>
    </div>
  </footer>

  <!-- Header scroll behaviour -->
  <script>
    document.addEventListener('scroll', function () {
      const header = document.querySelector('.site-header');
      if (!header) return;
      if (window.scrollY > 40) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });
  </script>

  <!-- SMS helper + mobile bar behaviour -->
  <script>
    function openSmsQuote() {
      var input = document.getElementById('suburb-input');
      var suburb = input ? input.value.trim() : '';
      var base = "Hey RedBack, I'm after a rubbish removal quote";
      if (suburb) {
        base += " in " + suburb;
      }
      base += ". I have some photos to send.";
      var encoded = encodeURIComponent(base);
      var smsUrl = "sms:0459272402?&body=" + encoded;
      window.location.href = smsUrl;
    }

    // Mobile bottom bar hide near booking section
    document.addEventListener('scroll', function () {
      var bar  = document.querySelector('.mobile-cta-bar');
      var book = document.getElementById('book-quote');
      if (!bar || !book) return;
      var rect   = book.getBoundingClientRect();
      var inView = rect.top < window.innerHeight && rect.bottom > 0;
      if (inView) {
        bar.classList.add('mobile-cta-hidden');
      } else {
        bar.classList.remove('mobile-cta-hidden');
      }
    });
  </script>

  <!-- Tai v9 front-end (logic unchanged, UI simplified) -->
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const widget       = document.querySelector('.mascot-widget');
    if (!widget) return;

    const toggle       = widget.querySelector('.mascot-toggle');
    const panel        = widget.querySelector('.mascot-panel');
    const closeBtn     = widget.querySelector('.mascot-close');
    const hint         = widget.querySelector('.mascot-hint');
    const chatLog      = widget.querySelector('#tai-chat-log');
    const inputEl      = widget.querySelector('#tai-chat-input');
    const sendBtn      = widget.querySelector('#tai-chat-send');
    const toneButtons  = widget.querySelectorAll('.mascot-tone-btn');
    const avatarImg    = widget.querySelector('.mascot-toggle img');

    let isSending = false;
    let tone = 'friendly';

    function isOpen() {
      return widget.classList.contains('mascot-open');
    }
    function openPanel() {
      widget.classList.add('mascot-open');
      if (hint) hint.classList.remove('has-text');
    }
    function closePanel() {
      widget.classList.remove('mascot-open');
    }

    if (toggle) {
      toggle.addEventListener('click', function () {
        isOpen() ? closePanel() : openPanel();
      });
    }
    if (closeBtn) {
      closeBtn.addEventListener('click', closePanel);
    }
    if (hint) {
      hint.addEventListener('click', openPanel);
    }

    // fake eye tracking
    if (avatarImg) {
      window.addEventListener('mousemove', function (e) {
        const mid = window.innerWidth / 2;
        if (e.clientX < mid - 60) {
          avatarImg.classList.add('mascot-look-left');
          avatarImg.classList.remove('mascot-look-right');
        } else if (e.clientX > mid + 60) {
          avatarImg.classList.add('mascot-look-right');
          avatarImg.classList.remove('mascot-look-left');
        } else {
          avatarImg.classList.remove('mascot-look-left', 'mascot-look-right');
        }
      });
    }

    function scrollToBottom() {
      if (!chatLog) return;
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    function addMessage(text, who = 'tai', opts = {}) {
      if (!chatLog) return;

      const msg  = document.createElement('div');
      const role = who === 'user' ? 'user' : 'tai';
      msg.className = 'mascot-msg mascot-msg-' + role;
      if (opts.small) msg.classList.add('mascot-msg-small');

      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.textContent = text;

      msg.appendChild(bubble);
      chatLog.appendChild(msg);
      scrollToBottom();
      return msg;
    }

    function setLoading(loading) {
      isSending = loading;
      if (sendBtn) sendBtn.disabled = loading;
      if (inputEl) inputEl.disabled = loading;
    }

    function getFallbackReply(text) {
      const q = (text || '').toLowerCase();

      function withTone(base) {
        return base;
      }

      if (q.includes('price') || q.includes('cost') || q.includes('how much')) {
        return withTone("For most jobs we price by trailer load. A full load starts from around $550 including GST, half loads from about $330, and smaller jobs can be less. The best way is to text a couple of photos and your suburb to 0459 272 402 and we‚Äôll reply with a firm quote.");
      }

      if (q.includes('area') || q.includes('suburb') || q.includes('where') || q.includes('service')) {
        return withTone("We service Brisbane Southside and Logan plus nearby suburbs. If you‚Äôre unsure whether we come to you, send your suburb with a quick photo of the load and I‚Äôll confirm it for you.");
      }

      if (q.includes('book') || q.includes('booking') || q.includes('same-day') || q.includes('same day')) {
        return withTone("To book, you can text photos of your rubbish and your suburb to 0459 272 402, or use the online Jobber booking form further down this page. We‚Äôll reply with a time window and confirmation. Same-day or next-day is often possible depending on the schedule.");
      }

      if (q.includes('what do you take') || q.includes('what you take') || q.includes('take?') || q.includes('rubbish')) {
        return withTone("We take general household junk, garage and shed clear-outs, green waste, small furniture moves, gym equipment and more. We can‚Äôt take asbestos, chemicals or anything hazardous ‚Äì for those you‚Äôll need a licensed specialist.");
      }

      if (q.includes('a-b') || q.includes('a to b') || q.includes('a 2 b') || q.includes('delivery')) {
        return withTone("For simple A to B deliveries of small household loads, pricing starts from around $100 including GST. Send the pickup and drop-off suburbs plus a rough idea of the items and I‚Äôll help with an estimate.");
      }

      return withTone("I‚Äôm here to help with pricing, what we take, our service area and how to book with RedBack Rubbish Removal. For the fastest quote, send a few photos of your load and your suburb to 0459 272 402 and our family-run team will text you back, usually the same day.");
    }

    async function sendToTai(rawText, opts = {}) {
      const text = (rawText || '').trim();
      if (!text || isSending) return;

      if (!opts.silentUser) {
        addMessage(text, 'user');
      }
      if (!opts.skipInputClear && inputEl) {
        inputEl.value = '';
      }

      setLoading(true);

      const typingMsg = document.createElement('div');
      typingMsg.className = 'mascot-msg mascot-msg-tai mascot-msg-small';
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      bubble.textContent = 'Tai is thinking...';
      typingMsg.appendChild(bubble);
      chatLog.appendChild(typingMsg);
      scrollToBottom();

      try {
        const res = await fetch('/.netlify/functions/tai-ai', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text, tone: tone })
        });

        let data = null;
        try {
          data = await res.json();
        } catch (e) {
          data = null;
        }

        typingMsg.remove();

        if (!res.ok || !data || typeof data.reply !== 'string') {
          addMessage(getFallbackReply(text), 'tai');
        } else {
          addMessage(data.reply, 'tai');
        }
      } catch (err) {
        console.error('Network error talking to Tai:', err);
        typingMsg.remove();
        addMessage(getFallbackReply(text), 'tai');
      } finally {
        setLoading(false);
        if (inputEl && !opts.noRefocus) inputEl.focus();
      }
    }

    if (sendBtn && inputEl) {
      sendBtn.addEventListener('click', function () {
        const value = inputEl.value.trim();
        if (!value) return;
        sendToTai(value);
      });

      inputEl.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          const value = inputEl.value.trim();
          if (!value) return;
          sendToTai(value);
        }
      });
    }

    toneButtons.forEach(function (btn) {
      btn.addEventListener('click', function () {
        const newTone = btn.getAttribute('data-tone') || 'friendly';
        tone = newTone;

        toneButtons.forEach(function (b) {
          b.classList.toggle('is-active', b === btn);
        });

        let msg = '';
        if (tone === 'friendly') {
          msg = "Sweet, I‚Äôll keep it casual and friendly.";
        } else if (tone === 'pro') {
          msg = "Got it. I‚Äôll keep things short and professional.";
        } else {
          msg = "Nice, I‚Äôll lean into the family vibe for you.";
        }
        addMessage(msg, 'tai', { small: true });
      });
    });

    const pricing = document.getElementById('pricing');
    const booking = document.getElementById('book-quote');

    function updateContext() {
      if (!hint) return;
      let context = '';
      const mid = window.innerHeight / 2;

      if (pricing) {
        const r1 = pricing.getBoundingClientRect();
        if (r1.top < mid && r1.bottom > mid) {
          context = 'Not sure on price? Ask me.';
        }
      }
      if (!context && booking) {
        const r2 = booking.getBoundingClientRect();
        if (r2.top < mid && r2.bottom > mid) {
          context = 'Need help booking? Ask me.';
        }
      }
      if (!context) {
        context = 'üëã Hey I‚Äôm Tai ‚Äî Tap to chat!';
      }

      hint.textContent = context;
      if (!isOpen()) {
        hint.classList.add('has-text');
      } else {
        hint.classList.remove('has-text');
      }
    }

    window.addEventListener('scroll', updateContext);
    window.addEventListener('resize', updateContext);
    updateContext();

    let greeted = false;
    try {
      greeted = window.sessionStorage.getItem('rb_mascot_greeted') === 'yes';
    } catch (e) {}

    if (!greeted) {
      addMessage(
        "Hi, I‚Äôm Tai from RedBack. Ask me about prices, what we take, or how booking works ‚Äì I‚Äôll keep it simple.",
        'tai'
      );
      try {
        window.sessionStorage.setItem('rb_mascot_greeted', 'yes');
      } catch (e) {}
    }
  });
  </script>

</body>
</html>
