<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>RedBack Rubbish Removal | Brisbane Southside & Logan</title>

  <meta name="description"
        content="Family-run rubbish removal in Brisbane Southside & Logan. We load it, we sweep up, and we dispose of it for you. No Mess ‚Äî No Stress." />

  <!-- Favicon / Logo -->
  <link rel="icon" type="image/png" href="images/logo.png" />

  <!-- Open Graph -->
  <meta property="og:title" content="RedBack Rubbish Removal" />
  <meta property="og:description" content="No Mess ‚Äî No Stress. Rubbish removal done for you in Brisbane Southside & Logan." />
  <meta property="og:image" content="images/logo.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://redbackrubbishremoval.com/" />

  <link rel="stylesheet" href="CSS/styles.css" />
</head>
<body>
  <!-- HEADER ---------------------------------------------------->
  <header class="site-header">
    <div class="container header-inner">
      <a href="#top" class="brand">
        <img src="images/logo.png" alt="RedBack Rubbish Removal logo" class="brand-logo">
        <div class="brand-text">
          <span class="brand-name">RedBack Rubbish Removal</span>
          <span class="brand-sub">Brisbane Southside &amp; Logan</span>
        </div>
      </a>

      <div class="header-actions">
        <div class="header-contact">
          <span class="header-label">Call us</span>
          <a href="tel:0459272402" class="header-phone">0459 272 402</a>
        </div>
        <div class="header-buttons">
          <a href="sms:0459272402?&body=Hi%20RedBack,%20I'd%20like%20to%20text%20photos%20for%20a%20quote."
             class="btn btn-ghost">
            Text photos for quote
          </a>
          <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c"
             class="btn btn-primary" target="_blank" rel="noopener">
            Book online
          </a>
        </div>
      </div>
    </div>
  </header>

  <main id="top">
    <!-- HERO --------------------------------------------------->
    <section class="hero hero-family">
      <div class="container hero-inner">
        <div class="hero-copy">
          <span class="pill pill-light">Family-run ‚Ä¢ Fully insured ‚Ä¢ Local</span>

          <h1>Rubbish removal done for you ‚Äì fast, friendly &amp; affordable.</h1>

          <p class="hero-sub">
            We load it, we sweep up, and we dispose of it properly.<br>
            You get your space back ‚Äì with <strong>No Mess ‚Äî No Stress.</strong>
          </p>

          <div class="hero-cta">
            <a href="tel:0459272402" class="btn btn-primary">üìû Call now</a>
            <a href="sms:0459272402?&body=Hi%20RedBack,%20I'd%20like%20to%20text%20photos%20for%20a%20quote."
               class="btn btn-outline">
              üì∑ Text photos for a quote
            </a>
          </div>

          <div class="hero-trust">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <div class="trust-copy">
              <p>Trusted by Brisbane Southside &amp; Logan locals.</p>
              <p class="small">On-time, uniformed &amp; respectful in your home or workplace.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- WHY / TRUST -------------------------------------------->
    <section class="section section-light">
      <div class="container">
        <div class="section-header">
          <h2>Why locals choose RedBack</h2>
          <p>We treat every job like it‚Äôs our own place ‚Äì fast, tidy, and respectful.</p>
        </div>

        <div class="grid-4">
          <article class="card">
            <h3>Family-run &amp; local</h3>
            <p>You‚Äôre dealing directly with a Brisbane Southside &amp; Logan family business ‚Äì not a big franchise.</p>
          </article>
          <article class="card">
            <h3>We do the heavy lifting</h3>
            <p>We load, lift, carry and sweep up so you don‚Äôt have to touch a thing.</p>
          </article>
          <article class="card">
            <h3>Clear upfront pricing</h3>
            <p>Trailer load pricing with no hidden fees. Tip fees included in your quote.</p>
          </article>
          <article class="card">
            <h3>Fully insured &amp; uniformed</h3>
            <p>Professional appearance, fully insured, and respectful on every property.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- SERVICES ----------------------------------------------->
    <section class="section">
      <div class="container">
        <div class="section-header">
          <h2>Rubbish removal services</h2>
          <p>From single items to full cleanouts ‚Äì if it fits in our trailer, we‚Äôll handle it.</p>
        </div>

        <div class="grid-3">
          <article class="card service-card">
            <h3>Household cleanouts</h3>
            <p>Old furniture, broken appliances, general household junk and more.</p>
            <ul>
              <li>Garage &amp; shed cleanouts</li>
              <li>End-of-lease rubbish</li>
              <li>Deceased estate support</li>
            </ul>
          </article>

          <article class="card service-card">
            <h3>Yard &amp; green waste</h3>
            <p>Branches, clippings, old timber, outdoor junk and garden waste.</p>
            <ul>
              <li>Storm cleanups</li>
              <li>Overgrown yard clear-outs</li>
              <li>Outdoor furniture removal</li>
            </ul>
          </article>

          <article class="card service-card">
            <h3>Real estate &amp; rentals</h3>
            <p>Fast, reliable service for agents, landlords and body corporates.</p>
            <ul>
              <li>Pre-sale cleanups</li>
              <li>Post-tenant rubbish removal</li>
              <li>Garage &amp; storage unit clear-outs</li>
            </ul>
          </article>
        </div>

        <div class="grid-3 services-extra">
          <article class="card service-card">
            <h3>Office &amp; commercial</h3>
            <p>Old desks, shelving, shop fittings and general commercial waste.</p>
          </article>

          <article class="card service-card">
            <h3>A ‚Üí B item delivery</h3>
            <p>Need something moved from A to B? If it fits in the trailer, we can shift it.</p>
            <p class="small">Great for marketplace or bulky-item purchases.</p>
          </article>

          <article class="card service-card">
            <h3>Custom jobs</h3>
            <p>Not sure if we can take it? Just send us a photo and we‚Äôll confirm.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- PRICING ------------------------------------------------->
    <section class="section section-cream" id="pricing">
      <div class="container">
        <div class="section-header">
          <h2>Simple trailer-load pricing</h2>
          <p>Honest, upfront pricing based on how much space your rubbish takes in our trailer.</p>
        </div>

        <div class="grid-3 pricing-grid">
          <article class="card card-pricing">
            <div class="pill pill-soft">Light loads</div>
            <h3>Quarter load</h3>
            <p class="price">From $_130__</p>
            <p>Perfect for a few bulky items or a small cleanout.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Ideal for single rooms or light jobs</li>
            </ul>
          </article>

          <article class="card card-pricing card-pricing-featured">
            <div class="pill pill-strong">Most popular</div>
            <h3>Half load</h3>
            <p class="price">From $_320__</p>
            <p>Great for garage, shed or mixed household rubbish.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Best value for typical jobs</li>
            </ul>
          </article>

          <article class="card card-pricing">
            <div class="pill pill-soft">Big cleanouts</div>
            <h3>Full load</h3>
            <p class="price">From $_550__</p>
            <p>For full property cleanouts and major declutters.</p>
            <ul>
              <li>Includes loading &amp; sweep up</li>
              <li>Tip fees included</li>
              <li>Multiple loads available</li>
            </ul>
          </article>
        </div>

        <p class="small align-center">
          Final price depends on access, type of material and total volume.
          Text us photos for a fast, no-obligation quote.
        </p>
      </div>
    </section>

    <!-- HOW IT WORKS ------------------------------------------->
    <section class="section">
      <div class="container">
        <div class="section-header">
          <h2>How it works</h2>
          <p>We keep it simple so you can get on with your day.</p>
        </div>

        <div class="grid-3 steps-grid">
          <article class="card step-card">
            <div class="step-number">1</div>
            <h3>Send us photos</h3>
            <p>Text or email photos of what you want gone ‚Äì or book a visit.</p>
          </article>

          <article class="card step-card">
            <div class="step-number">2</div>
            <h3>Get a clear quote</h3>
            <p>We confirm your price upfront. No hidden fees or surprise add-ons.</p>
          </article>

          <article class="card step-card">
            <div class="step-number">3</div>
            <h3>We load &amp; sweep up</h3>
            <p>On the day, we arrive on time, load everything and leave it tidy.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- GALLERY ------------------------------------------------->
    <section class="section section-light" id="gallery">
      <div class="container">
        <div class="section-header">
          <h2>Recent jobs we‚Äôve completed</h2>
          <p>Real jobs from Brisbane Southside &amp; Logan clients.</p>
        </div>

        <div class="gallery-grid">
          <figure class="gallery-item">
            <img src="images/green-waste.jpg" alt="Green waste cleanup after storm" />
            <figcaption>Green waste cleared and taken away.</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/storage-unit.jpg" alt="Storage unit rubbish removal job" />
            <figcaption>Storage unit completely emptied and swept.</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/gym-equipment.jpg" alt="Old gym equipment removal job" />
            <figcaption>Heavy gym equipment safely removed.</figcaption>
          </figure>
          <figure class="gallery-item">
            <img src="images/boxes-delivery.jpg" alt="Boxes and furniture loaded for delivery" />
            <figcaption>Boxes &amp; furniture picked up and delivered.</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- AREAS WE COVER ----------------------------------------->
    <section class="section">
      <div class="container">
        <div class="section-header">
          <h2>Areas we cover</h2>
          <p>Based on Brisbane Southside &amp; Logan, with flexible coverage nearby.</p>
        </div>

        <div class="areas-grid">
          <ul class="areas-list">
            <li>Logan</li>
            <li>Logan Central</li>
            <li>Browns Plains</li>
            <li>Underwood</li>
            <li>Springwood</li>
            <li>Slacks Creek</li>
            <li>Rochedale South</li>
            <li>And surrounding suburbs</li>
          </ul>
          <div class="areas-card card">
            <h3>Not sure if you‚Äôre in range?</h3>
            <p>Send us your address and a quick photo of what needs to go. We‚Äôll confirm if we can help and what it will cost.</p>
            <a href="sms:0459272402?&body=Hi%20RedBack,%20checking%20if%20I%27m%20in%20your%20service%20area."
               class="btn btn-outline">
              Text us your suburb
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- REVIEWS ------------------------------------------------->
    <section class="section section-cream" id="reviews">
      <div class="container">
        <div class="section-header">
          <h2>What our customers say</h2>
          <p>Real feedback from people we‚Äôve helped.</p>
        </div>

        <div class="grid-3 reviews-grid">
          <article class="card review-card">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúTurned up on time, cleared everything quickly and left the area spotless. Super friendly husband and wife and easy to deal with.‚Äù</p>
            <p class="review-name">‚Äî Mark W. - Waterford</p>
          </article>

          <article class="card review-card">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúUsed TJ for a rental cleanout. Great communication, fair price and the place looked 100x better afterwards.‚Äù</p>
            <p class="review-name">‚Äî Karen A. - Forest Lake</p>
          </article>

          <article class="card review-card">
            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <p>‚ÄúMade a big job feel easy. They loaded everything and swept up ‚Äì worth every dollar.‚Äù</p>
            <p class="review-name">‚ÄîAndy S. - Kingston</p>
          </article>
        </div>
      </div>
    </section>

    <!-- CONTACT / FINAL CTA ------------------------------------>
    <section class="section section-dark" id="contact">
      <div class="container contact-grid">
        <div>
          <h2>Ready to clear the clutter?</h2>
          <p>Send us photos of your rubbish or give us a quick call. We‚Äôll come back with a clear, upfront quote.</p>

          <div class="contact-cta">
            <a href="tel:0459272402" class="btn btn-primary">üìû Call 0459 272 402</a>
            <a href="sms:0459272402?&body=Hi%20RedBack,%20I%27d%20like%20to%20text%20photos%20for%20a%20rubbish%20quote."
               class="btn btn-ghost-light">
              üì∑ Text photos for a quote
            </a>
          </div>

          <p class="small contact-note">
            Prefer to book online?
            <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c" target="_blank" rel="noopener">
              Click here to use our online booking form.
            </a>
          </p>
        </div>

        <div class="contact-details card">
          <h3>Business details</h3>
          <ul class="contact-list">
            <li><strong>Service area:</strong> Brisbane Southside &amp; Logan</li>
            <li><strong>Hours:</strong> Monday‚ÄìSaturday (flexible by appointment)</li>
            <li><strong>ABN:</strong>54532714102</li>
            <li><strong>Email:</strong> <a href="mailto:info@redbackrubbishremoval.com">info@redbackrubbishremoval.com</a></li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER --------------------------------------------------->
  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <span>¬© <span id="year"></span> RedBack Rubbish Removal.</span>
        <span>No Mess ‚Äî No Stress.</span>
      </div>
      <div class="footer-right">
        <span>Brisbane Southside &amp; Logan</span>
      </div>
    </div>
  </footer>

  <!-- MOBILE STICKY BAR --------------------------------------->
  <div class="mobile-bar">
    <a href="tel:0459272402">Call</a>
    <a href="sms:0459272402?&body=Hi%20RedBack,%20I%27d%20like%20a%20rubbish%20removal%20quote.">Text photos</a>
    <a href="https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c" target="_blank" rel="noopener">Book online</a>
  </div>

  <!-- =============== TAI / LIL REDBACK CHAT WIDGET =============== -->

  <style>
    /* Basic layout for widget */
    .tai-chat-widget {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 9999;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    }

    .tai-chat-launcher {
      border: none;
      border-radius: 999px;
      padding: 10px 16px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      background: #e50914;
      color: #ffffff;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
    }

    .tai-chat-panel {
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 320px;
      max-width: calc(100% - 32px);
      background: #111111;
      color: #ffffff;
      border-radius: 20px;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.08);
      display: none;
      flex-direction: column;
      overflow: hidden;
    }

    @media (max-width: 640px) {
      .tai-chat-panel {
        right: 10px;
        left: 10px;
        width: auto;
      }
    }

    .tai-chat-header {
      padding: 12px 14px;
      background: #1a1a1a;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 13px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    .tai-chat-close {
      border: none;
      background: transparent;
      color: #ffffff;
      font-size: 16px;
      cursor: pointer;
    }

    .tai-chat-messages {
      padding: 10px 12px;
      max-height: 320px;
      overflow-y: auto;
      background: #121212;
    }

    .chat-message {
      margin-bottom: 8px;
      display: flex;
    }

    .chat-message-user {
      justify-content: flex-end;
    }

    .chat-message-ai {
      justify-content: flex-start;
    }

    .chat-message-bubble {
      padding: 8px 10px;
      border-radius: 14px;
      font-size: 13px;
      line-height: 1.4;
      max-width: 80%;
      white-space: pre-wrap;
    }

    /* USER BUBBLES ‚Äì REDBACK BLUE */
    .chat-message-user .chat-message-bubble {
      background: #0283FF;
      color: #ffffff;
      border-bottom-right-radius: 4px;
    }

    .chat-message-ai .chat-message-bubble {
      background: #1f1f1f;
      color: #ffffff;
      border-bottom-left-radius: 4px;
    }

    .tai-chat-form {
      padding: 8px 10px 10px;
      background: #101010;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .tai-chat-quick-row {
      display: flex;
      gap: 6px;
    }

    .tai-chat-quick-btn {
      flex: 1;
      border-radius: 999px;
      border: none;
      font-size: 11px;
      padding: 6px 10px;
      cursor: pointer;
      background: #222222;
      color: #f5f5f5;
    }

    .tai-chat-quick-btn:hover {
      background: #2b2b2b;
    }

    .tai-chat-input-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .tai-chat-input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid #333333;
      background: #181818;
      color: #ffffff;
      font-size: 13px;
      padding: 7px 10px;
      outline: none;
      min-width: 0;
    }

    .tai-chat-input::placeholder {
      color: #777777;
    }

    .tai-chat-voice-btn {
      border-radius: 999px;
      border: none;
      padding: 7px 9px;
      background: #222222;
      color: #ffffff;
      font-size: 14px;
      cursor: pointer;
      flex-shrink: 0;
    }

    .tai-chat-voice-btn.listening {
      background: #e50914;
    }

    /* SEND BUTTON ‚Äì REDBACK BLUE */
    .tai-chat-send-btn {
      background: #0283FF;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 13px;
      cursor: pointer;
      flex-shrink: 0;
      transition: 0.2s ease;
    }

    .tai-chat-send-btn:hover {
      filter: brightness(1.08);
    }

    /* typing dots */
    .typing-dots {
      display: inline-flex;
      gap: 3px;
      margin-left: 4px;
      vertical-align: middle;
    }
    .typing-dots span {
      display: block;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: #bbbbbb;
      animation: taiTyping 1s infinite ease-in-out;
    }
    .typing-dots span:nth-child(2) {
      animation-delay: 0.15s;
    }
    .typing-dots span:nth-child(3) {
      animation-delay: 0.3s;
    }

    @keyframes taiTyping {
      0%, 80%, 100% {
        transform: translateY(0);
        opacity: 0.4;
      }
      40% {
        transform: translateY(-3px);
        opacity: 1;
      }
    }

    /* Push chat above mobile sticky bar */
    @media (max-width: 768px) {
      .tai-chat-widget,
      .tai-chat-panel {
        bottom: calc(60px + 20px); /* sticky bar height + extra space */
      }
    }
  </style>

  <!-- CHAT WIDGET UI -->
  <div class="tai-chat-widget">
    <!-- Floating Button -->
    <button id="tai-chat-launcher" class="tai-chat-launcher">
      üí¨ Chat with Tai
    </button>

    <!-- Chat Panel -->
    <div id="tai-chat-panel" class="tai-chat-panel" aria-hidden="true">
      <div class="tai-chat-header">
        <span>Chat with Tai from RedBack</span>
        <button id="tai-chat-close" class="tai-chat-close" type="button">√ó</button>
      </div>

      <div id="tai-chat-messages" class="tai-chat-messages"></div>

      <form id="tai-chat-form" class="tai-chat-form">
        <div class="tai-chat-quick-row">
          <button id="tai-photos-btn" class="tai-chat-quick-btn" type="button">
            üì∏ Send photos for a quote
          </button>
        </div>

        <div class="tai-chat-input-row">
          <button
            id="tai-voice-btn"
            class="tai-chat-voice-btn"
            type="button"
            title="Talk to Tai"
          >
            üé§
          </button>
          <input
            id="tai-chat-input"
            class="tai-chat-input"
            type="text"
            autocomplete="off"
            placeholder="Tell me what you‚Äôre tossing & which suburb you're in..."
          />
          <!-- NEW SEND BUTTON -->
          <button id="tai-send-btn" class="tai-chat-send-btn" type="button">
  Send
</button>

        </div>
      </form>
    </div>
  </div>

  <!-- ================= CHAT WIDGET SCRIPT ================= -->
 <script>
  document.addEventListener("DOMContentLoaded", function () {
    (function () {
      const TAI_API_URL = "https://tai-ai.crimson-meadow-d5c5.workers.dev";

      const SMS_NUMBER = "0459 272 402".replace(/\s+/g, "");
      const JOBBER_URL =
        "https://clienthub.getjobber.com/booking/5f0fd976-744c-4acf-a6a6-15a7427f134c";

      const launcher = document.getElementById("tai-chat-launcher");
      const panel = document.getElementById("tai-chat-panel");
      const closeBtn = document.getElementById("tai-chat-close");
      const form = document.getElementById("tai-chat-form");
      const input = document.getElementById("tai-chat-input");
      const messagesEl = document.getElementById("tai-chat-messages");
      const photosBtn = document.getElementById("tai-photos-btn");
      const voiceBtn = document.getElementById("tai-voice-btn");
      const sendBtn = document.getElementById("tai-send-btn");

      if (!launcher || !panel || !form || !input || !messagesEl) {
        console.warn("Tai chat: missing elements");
        return;
      }

      let chatHistory = [];
      let isSending = false;
      let hasGreeted = false;
      let profile = { name: null, suburb: null };

      function appendMessage(text, from) {
        const wrapper = document.createElement("div");
        wrapper.className =
          "chat-message chat-message-" + (from === "user" ? "user" : "ai");

        const bubble = document.createElement("div");
        bubble.className = "chat-message-bubble";
        bubble.textContent = text;

        wrapper.appendChild(bubble);
        messagesEl.appendChild(wrapper);
        messagesEl.scrollTop = messagesEl.scrollHeight;
        return bubble;
      }

      function appendTypingMessage() {
        const wrapper = document.createElement("div");
        wrapper.className = "chat-message chat-message-ai";

        const bubble = document.createElement("div");
        bubble.className = "chat-message-bubble";
        bubble.innerHTML =
          'Lil RedBack is thinking<span class="typing-dots"><span></span><span></span><span></span></span>';

        wrapper.appendChild(bubble);
        messagesEl.appendChild(wrapper);
        messagesEl.scrollTop = messagesEl.scrollHeight;
        return bubble;
      }

      function sendGreetingIfNeeded() {
        if (hasGreeted) return;
        const greetText =
          "G‚Äôday, I‚Äôm Tai from RedBack. Tell me what you‚Äôre trying to get rid of and which suburb you‚Äôre in.";
        appendMessage(greetText, "ai");
        chatHistory.push({ role: "assistant", content: greetText });
        hasGreeted = true;
      }

      function openChat() {
        panel.style.display = "flex";
        panel.setAttribute("aria-hidden", "false");
        sendGreetingIfNeeded();
        setTimeout(() => input.focus(), 50);
      }

      function closeChat() {
        panel.style.display = "none";
        panel.setAttribute("aria-hidden", "true");
      }

      launcher.addEventListener("click", () => {
        const isOpen = panel.style.display === "flex";
        if (isOpen) closeChat();
        else openChat();
      });

      if (closeBtn) closeBtn.addEventListener("click", closeChat);

      // --- very simple name & suburb extraction for "memory mode"
      function tryExtractProfile(text) {
        const nameMatch = text.match(/(?:i'm|im|i am|my name is)\s+([A-Za-z]+)/i);
        if (nameMatch && !profile.name) profile.name = nameMatch[1];

        const suburbMatch = text.match(
          /\b(?:in|at)\s+([A-Z][a-zA-Z]+(?:\s+[A-Z][a-zA-Z]+)?)/,
        );
        if (suburbMatch && !profile.suburb) profile.suburb = suburbMatch[1];
      }

      // --- SMS / ‚ÄúSend photos‚Äù button
      if (photosBtn) {
        photosBtn.addEventListener("click", () => {
          if (!SMS_NUMBER) {
            alert("Boss, update SMS_NUMBER in the script to your real mobile.");
            return;
          }
          const baseText = profile.suburb
            ? `Hi Tai, I‚Äôve got some rubbish to remove in ${profile.suburb}.`
            : "Hi Tai, I‚Äôve got some rubbish to remove. I‚Äôm in [your suburb].";
          const smsBody = baseText + " I‚Äôll send some photos now.";
          const href = `sms:${SMS_NUMBER}?body=${encodeURIComponent(smsBody)}`;
          window.location.href = href;
        });
      }

      // --- Voice input (speech ‚Üí text)
      let recognition = null;
      let isListening = false;

      if ("webkitSpeechRecognition" in window || "SpeechRecognition" in window) {
        const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
        recognition = new SR();
        recognition.lang = "en-AU";
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;
      }

      if (voiceBtn && recognition) {
        voiceBtn.addEventListener("click", () => {
          if (!isListening) {
            recognition.start();
            isListening = true;
            voiceBtn.classList.add("listening");
            voiceBtn.textContent = "üõë";
          } else {
            recognition.stop();
          }
        });

        recognition.addEventListener("result", (event) => {
          const transcript = event.results[0][0].transcript;
          if (input.value) input.value += " " + transcript;
          else input.value = transcript;
        });

        recognition.addEventListener("end", () => {
          isListening = false;
          voiceBtn.classList.remove("listening");
          voiceBtn.textContent = "üé§";
        });
      } else if (voiceBtn && !recognition) {
        voiceBtn.disabled = true;
        voiceBtn.title = "Voice input not supported on this browser";
      }

      // Helper: when booking_ready, show an extra summary bubble
      function handleBookingIfReady(data) {
        if (!data?.booking?.booking_ready) return;

        const b = data.booking;
        const summary = [
          `üìç Suburb: ${b.suburb || "Unknown"}`,
          `üì¶ Job: ${b.job_type || "Not specified"}`,
          `üïí Time: ${b.timing || "Flexible"}`,
        ].join("\n");

        const wrapper = document.createElement("div");
        wrapper.className = "chat-message chat-message-ai";

        const bubble = document.createElement("div");
        bubble.className = "chat-message-bubble";
        bubble.innerHTML = "Awesome! lets forward this straight to the team ‚Äî review below:";

        const pre = document.createElement("pre");
        pre.textContent = summary;
        pre.style.background = "#222";
        pre.style.padding = "8px";
        pre.style.borderRadius = "6px";

        const btn = document.createElement("button");
        btn.textContent = "Send Booking Request üì©";
        btn.style.background = "#e50914";
        btn.style.color = "white";
        btn.style.marginTop = "10px";
        btn.style.padding = "8px 12px";
        btn.style.borderRadius = "6px";
        btn.style.cursor = "pointer";

        btn.addEventListener("click", () => {
          const smsBody = encodeURIComponent(
            `Hey RedBack ‚Äî here‚Äôs my job request:\n${summary}`,
          );
          window.location.href = `sms:${SMS_NUMBER}?body=${smsBody}`;
        });

        bubble.appendChild(pre);
        bubble.appendChild(btn);
        wrapper.appendChild(bubble);
        messagesEl.appendChild(wrapper);
        messagesEl.scrollTop = messagesEl.scrollHeight;
      }

      // --- Core send logic (used by button + Enter key)
      async function sendMessage() {
        if (isSending) return;

        const text = input.value.trim();
        if (!text) return;

        appendMessage(text, "user");
        chatHistory.push({ role: "user", content: text });
        tryExtractProfile(text);
        input.value = "";

        const thinkingBubble = appendTypingMessage();

        isSending = true;
        try {
          const res = await fetch(TAI_API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              message: text,
              history: chatHistory,
              tone: "friendly",
              source: "website-chat",
              profile,
            }),
          });

          let replyText = "";
          let data = null;

          if (!res.ok) {
            replyText =
              "Sorry, my full brain isn‚Äôt loading right now.\n\n" +
              "You can still send us photos by SMS or call and we‚Äôll give you a quote:\n" +
              "‚Ä¢ Text photos for a fast quote\n" +
              "‚Ä¢ Or tap the Call button at the bottom of the page.";
          } else {
            data = await res.json();
            replyText =
              (data && (data.reply || data.message || data.text)) ||
              "I‚Äôve received your message, but I couldn‚Äôt find a clear reply. Try rephrasing or give us a quick call.";
          }

          thinkingBubble.textContent = replyText;
          chatHistory.push({ role: "assistant", content: replyText });

          handleBookingIfReady(data);
        } catch (err) {
          console.error("Tai error:", err);
          thinkingBubble.textContent =
            "Something went wrong talking to my brain.\n\nPlease try again in a moment or send us a text with photos for a fast quote.";
        } finally {
          isSending = false;
          messagesEl.scrollTop = messagesEl.scrollHeight;
          // keep focus so keyboard stays up
          input.focus();
        }
      }

      // Click on SEND button
      if (sendBtn) {
        sendBtn.addEventListener("click", (e) => {
          e.preventDefault();
          sendMessage();
        });
      }

      // Pressing Enter in the input
      if (input) {
        input.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            sendMessage();
          }
        });
      }

      // Prevent default form submit (so Safari doesn't mess with layout)
      form.addEventListener("submit", (e) => {
        e.preventDefault();
      });
    })();
  });
</script>
